webpackJsonp([7],{"9bGG":function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return function(t){function n(){var e,o,i;a(this,n);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return e=o=r(this,t.call.apply(t,[this].concat(c))),o.state={isHovering:!1},o.handlers={onMouseOver:function e(){return o._setHover(!0)},onMouseLeave:function e(){return o._setHover(!1)}},i=e,r(o,i)}return o(n,t),n.prototype.componentDidMount=function e(){f(this)},n.prototype.componentWillUnmount=function e(){clearTimeout(this.hoverTimer),g(this)},n.prototype._setHover=function e(t){var n=this;if(clearTimeout(this.hoverTimer),t&&d)return void(this.hoverTimer=setTimeout(function(){return n._setHover(t)},u));this.hoverTimer=setTimeout(function(){t!==n.state.isHovering&&n.setState({isHovering:t})},l)},n.prototype.render=function t(){return c.a.createElement(e,Object.assign({},this.props,{hoverHandlers:this.handlers,isHovering:this.state.isHovering}))},n}(s.Component)}t.a=i;var s=n("OVW8"),c=n.n(s),l=32,u=100,p=null,d=!1,m=[],h=function e(){clearTimeout(p),d=!0,p=setTimeout(function(){d=!1},u)},f=function e(t){0===m.length&&window.addEventListener("scroll",h),m.push(t)},g=function e(t){var n=m.indexOf(t);m.splice(n,1),0===m.length&&window.removeEventListener("scroll",h)}},"AsH/":function(e,t,n){"use strict";function a(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.length<s||t?{maxWidth:c,margin:{left:"auto",right:"auto"}}:{}}n.d(t,"b",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"d",function(){return i}),n.d(t,"a",function(){return c}),t.e=a;var r=40,o={BOARD:"board",DID_IT:"userdiditdata",INTEREST:"interest",PIN:"pin",SEARCH:"news_hub_search",USER:"user"},i=3,s=3,c=744},EjDp:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.contactCount,n=e.isInContactRequestsView,a=e.onClick;if(!t)return null;var r=void 0;return r=t>re?ee.a._("1000+ contact requests","messaging"):t>=ae&&t<=re?ee.a._("100+ contact requests","messaging"):Q.h(ee.a.ngettext("{{ contactCount }} contact request","{{ contactCount }} contact requests",t),{contactCount:""+t}),K.a.createElement("div",{className:"Module ContactRequestsCount"},K.a.createElement(te.a,{className:$()({contactRequestView:n},"isBrioFlat","contactRequestsCount","btn"),hasIcon:n,hasText:!0,onClick:a,text:r,type:"borderless"}))}function s(e){var t=e.contactRequests,n=e.handleCancelViewContactRequests;return t?se.a.createElement("div",{className:"Module ContactRequestsCount"},se.a.createElement(oe,{contactCount:t.length,isInContactRequestsView:!0,onClick:n}),se.a.createElement(ue.b,{_padding:2},se.a.createElement(ue.E,{size:"sm"},ce.a._("These messages appear from people outside of your networks.","contact requests disclaimer"))),t.map(function(e,t){return se.a.createElement("div",{key:e.id},0!==t?pe:null,se.a.createElement(X,e))})):null}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function p(e){var t=e.contactItem,n=e.currentUserID,a=e.conversationItem,r=e.handleContactWrapperClick,o=e.isSelected,i=e.isUser,s=["selectionIndicator","contactCircleRep","selectionIndicator"];return He.a.createElement("a",{className:"conversationContactContainer",key:a.id,onClick:function e(){return r(i,t)},onKeyDown:function e(){},role:"button",tabIndex:0},Ve(n,a),o?He.a.createElement("div",{className:s.join(" ")},Le):null)}function d(e){var t=e.tokenizedItems;return Ge.a.createElement("div",{className:"reactTokenizedInputContainer",style:{zIndex:1e3}},Ge.a.createElement("div",{className:"tokenContainer"},t.map(function(e,t){return Ge.a.createElement("div",{className:"tokenItem",key:t},e.full_name?Ge.a.createElement(ze.a,{size:"small",users:[e]}):Ge.a.createElement(ze.a,{emails:[e],size:"small"}))})),qe)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function y(e){var t=e.boardInvites;return t?Ot.a.createElement("div",null,t.map(function(e){return Ot.a.createElement(wt,{boardInviteItem:e,key:e.id})})):null}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function k(e){var t=e.board,n=t.name,a=t.image_cover_url,r=t.images;return hn.a.createElement(fn.a,{boardName:n,boardThumbs:r[En],coverImageUrl:a,height:bn,numCols:yn,width:Cn})}function x(e){var t=e.interests;return wn.a.createElement(Nn.b,{width:kn,xs:{display:"flex"},justifyContent:"between"},t.map(function(e,t){var n=e.backgroundColor,a=e.id,r=e.images["236x"],o=e.name;return wn.a.createElement(Sn.a,{key:a,backgroundColor:n,image:r,name:o,width:Tn})}))}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function D(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function A(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var U=n("OVW8"),V=n.n(U),L=n("5tOk"),F=n("W/Cr"),G=n("ZtCB"),z=n.n(G),q=n("gEaE"),Y=function(e){function t(){var n,o,i;a(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=o=r(this,e.call.apply(e,[this].concat(c))),o.state={contactRequestCompleted:!1,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1},o.handleInviteAcceptResponse=function(){o.setState({isAcceptButtonLoading:!0,isIgnoreButtonLoading:!1}),z.a.create("ContactRequestAcceptResource",{contact_request:o.props}).callUpdate().then(function(){o.setState({contactRequestCompleted:!0,isAcceptButtonLoading:!1})})},o.handleInviteDeclineResponse=function(){o.setState({isAcceptButtonLoading:!1,isIgnoreButtonLoading:!0}),z.a.create("ContactRequestIgnoreResource",{contact_request:o.props}).callDelete().then(function(){o.setState({contactRequestCompleted:!0,isIgnoreButtonLoading:!1})})},i=n,r(o,i)}return o(t,e),t.prototype.renderRequestText=function e(t,n,a){if(t){var r=t.name,o=t.url;return L.h(F.a._('<a href="/{{ senderUsername }}/">{{ senderName }}</a> invited you to collaborate on <a href="{{ boardUrl }}">{{ boardName }}</a>'),{boardName:r,boardUrl:o,senderName:n,senderUsername:a})}return L.h(F.a._('<a href="/{{ senderUsername }}/">{{ senderName }}</a> wants to send a message to you'),{senderName:n,senderUsername:a})},t.prototype.render=function e(){var t=this.state,n=t.contactRequestCompleted,a=t.isAcceptButtonLoading,r=t.isIgnoreButtonLoading;if(n)return null;var o=this.props,i=o.board,s=o.sender,c=s.image_large_url,l=s.full_name,u=s.username;return V.a.createElement(q.b,{_paddingX:2,_paddingY:4,xs:{display:"flex"}},V.a.createElement(q.b,{height:50,width:50,shrink:!0},V.a.createElement(q.s,{href:"/"+u+"/"},V.a.createElement(q.a,{name:u,src:c}))),V.a.createElement(q.b,{_paddingX:3},V.a.createElement(q.b,{_marginBottom:3},V.a.createElement(q.E,null,V.a.createElement("span",{dangerouslySetInnerHTML:{__html:this.renderRequestText(i,l,u)}}))),V.a.createElement(q.b,{xs:{display:"flex"},_marginLeft:-1,_marginRight:-1},V.a.createElement(q.b,{_paddingX:1,grow:!0},V.a.createElement(q.c,{disabled:r,onClick:this.handleInviteDeclineResponse,size:"sm",text:F.a._("Ignore","ignore contact request")})),V.a.createElement(q.b,{_paddingX:1,grow:!0},V.a.createElement(q.c,{color:"red",disabled:a,onClick:this.handleInviteAcceptResponse,size:"sm",text:F.a._("Accept","accept contact request")})))))},t}(U.Component),X=Y,Z=n("OVW8"),K=n.n(Z),Q=n("5tOk"),J=n("GGB8"),$=n.n(J),ee=n("W/Cr"),te=n("nM9s"),ne=n("Grh7"),ae=100,re=1e3,oe=Object(ne.a)({name:"ContactRequestsCountGetResource",key:"contactCount"},{allowStale:!1})(i),ie=n("OVW8"),se=n.n(ie),ce=n("W/Cr"),le=n("Grh7"),ue=n("gEaE"),pe=se.a.createElement(ue.i,null),de=Object(le.a)({name:"ContactRequestsResource",key:"contactRequests"},{allowStale:!1})(s),me=n("OVW8"),he=n.n(me),fe=n("DUIN"),ge=n("5tOk"),ve=n("NYeZ"),be=n("GGB8"),ye=n.n(be),Ee=n("W/Cr"),Ce=n("nM9s"),_e=n("tmfO"),we=n("ZtCB"),Ie=n.n(we),Oe=n("Kqaz"),Se=n("MQ2h"),Ne=n.n(Se),Te=n("Vfgg"),ke=n("kzic"),xe=n("dCTv"),Pe=n("fvzG"),Re=50,je=he.a.createElement("span",{className:"conversationUnreadMark"}),We=function(e){function t(){var n,a,r;c(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=a=l(this,e.call.apply(e,[this].concat(i))),a.state={isHidden:!1,unread:a.props.data.unread||0},a.handleHideConversation=function(e){e.stopPropagation();var t=a.props.data,n=t.id;Ie.a.create("ConversationResource",{conversation_id:n}).callDelete({showError:!1}),a.removeConversationChatHead(n),a.setState({isHidden:!0}),a.logConversationItemHide(n)},a.handleConversationItemClick=function(){var e=a.props.data;a.setState({unread:0}),e.board||a.showConversationChatHead(e),a.logConversationItemClick()},a.logConversationItemClick=function(){(0,a.props.contextLog)(101,{component:54,element:277})},a.logConversationItemHide=function(e){(0,a.props.contextLog)(182,{component:54,element:277,conversation_id:e})},r=n,l(a,r)}return u(t,e),t.prototype.showConversationChatHead=function e(t){var n=this.props.dispatch,a=t.id;n(Object(Pe.d)(a)),n(Object(Pe.c)(a))},t.prototype.removeConversationChatHead=function e(t){var n=this.props.dispatch;n(Object(Pe.b)(t)),n(Object(Pe.a)(t))},t.prototype.renderConversationsTitleNames=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=n.map(function(e,t){return he.a.createElement(_e.b,{to:"/"+e.username+"/",key:t},e.first_name)}).concat(t.map(function(e,t){return he.a.createElement("span",{key:t},e)}));return he.a.createElement("div",{className:"membersTitleNames"},a.map(function(e,t){var n=Ee.a._(", ","comma separating conversation member names");return he.a.createElement("span",{key:t},e,t===a.length-1?"":he.a.createElement("span",null,n))}))},t.prototype.renderConversationsTitleView=function e(t,n,a,r){var o=this.props.viewerId,i=r.filter(function(e){return e.id!==o});return he.a.createElement("h1",{className:"conversationTitleContainer"},n||this.renderConversationsTitleNames(a,i))},t.prototype.renderLastMessage=function e(t){var n=t.board,a=t.created_at,r=t.pin,o=t.sender,i=t.text,s=t.user,c=i;if(!c){var l=o.first_name;r?c=ge.h(Ee.a._("{{ senderName }} sent a Pin","messaging"),{senderName:l}):n?c=ge.h(Ee.a._("{{ senderName }} sent a board","messaging"),{senderName:l}):s&&(c=ge.h(Ee.a._("{{ senderName }} sent a user profile","messaging"),{senderName:l}))}return c=Object(Te.b)(c||"",50),he.a.createElement("div",null,he.a.createElement("div",{className:"lastMessageContent"},c),he.a.createElement("div",{className:"lastMessageTimestamp"},Ee.a.getHumanizedTimesince(a)))},t.prototype.renderItemContent=function e(){var t=this.state.isHidden,n=this.props.data,a=n.board,r=n.emails,o=n.last_message,i=n.name,s=n.users,c=r||[];return he.a.createElement("div",{className:ye()("ConversationListItemReact",{conversationHidden:t})},he.a.createElement("div",{className:"conversationRepContainer"},he.a.createElement(ve.a,{board:a,emails:c,users:s})),he.a.createElement("div",{className:"conversationContentContainer"},this.renderConversationsTitleView(a,i,c,s),o?this.renderLastMessage(o):null),this.state.unread>0?je:null,he.a.createElement(Ce.a,{className:"conversationCloseButton",hasText:!0,onClick:this.handleHideConversation,text:Ee.a._("Ã—","close button"),type:"borderless"}))},t.prototype.render=function e(){var t=this.props.data,n=t.board;return t.users.length?n?he.a.createElement(_e.b,{onClick:this.handleConversationItemClick,to:n.url},this.renderItemContent()):he.a.createElement("div",{onClick:this.handleConversationItemClick,role:"button"},this.renderItemContent()):null},t}(me.Component);We.contextTypes={userAgent:me.PropTypes.shape({isMobile:me.PropTypes.bool.isRequired}).isRequired};var Be=function e(t){return{viewerId:t.viewer.id}},De=Object(Se.compose)(Object(fe.connect)(Be),Oe.a,Object(xe.a)(),ke.withRouter)(We),Me=n("OVW8"),He=n.n(Me),Ae=n("NYeZ"),Ue=n("W/Cr"),Ve=function e(t,n){var a=n.emails,r=n.users,o=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t&&0!==t.length){var n=t[0];return He.a.createElement("div",{className:"contactWrapper"},He.a.createElement(Ae.a,{emails:[n],size:"small"}),He.a.createElement("div",{className:"contactTextInfo"},He.a.createElement("span",{className:"contactName"},n),He.a.createElement("span",{className:"contactDescription"},Ue.a._("Email friend","on selected contact list"))))}},i=function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=n[0].id===t?n[1]:n[0],r=a.full_name;return He.a.createElement("div",{className:"contactWrapper"},He.a.createElement(Ae.a,{size:"small",users:[a]}),He.a.createElement("div",{className:"contactTextInfo"},He.a.createElement("span",{className:"contactName"},r),He.a.createElement("span",{className:"contactDescription"},Ue.a._("On Pinterest","info about a contact"))))};return He.a.createElement("div",null,a&&a.length>0?o(a):i(r))},Le=He.a.createElement("em",null);p.defaultProps={isSelected:!1};var Fe=n("OVW8"),Ge=n.n(Fe),ze=n("NYeZ"),qe=Ge.a.createElement("div",{className:"textFieldContainer"}),Ye=n("OVW8"),Xe=n.n(Ye),Ze=n("DUIN"),Ke=n("GGB8"),Qe=n.n(Ke),Je=n("W/Cr"),$e=n("nM9s"),et=n("ZtCB"),tt=n.n(et),nt=n("tZWC"),at=n("eXpm"),rt=n.n(at),ot=n("MQ2h"),it=n.n(ot),st=n("fvzG"),ct=8,lt=2,ut=function(e){function t(){var n,a,r;m(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=a=h(this,e.call.apply(e,[this].concat(i))),a.state={contactCounter:0,selectedEmails:{},selectedUsers:{},tokenizedItems:[],value:""},a.onHandleContactClick=function(e,t){var n=a.state,r=n.selectedEmails,o=n.selectedUsers,i=e?o:r,s=e?t.id:t,c=i[s];i[s]=!c,c?a.removeTokenItem(t):a.addTokenItem(t)},a.getSelectedEmails=function(){var e=a.state.selectedEmails;return Object.keys(e).filter(function(t){return e[t]})},a.getSelectedUsers=function(){var e=a.state.selectedUsers;return Object.keys(e).filter(function(t){return e[t]})},a.handleTypeaheadKeyDown=function(e){var t=a.state,n=t.contactCounter,r=t.selectedEmails,o=t.selectedUsers,i=t.tokenizedItems,s=t.value;if(e.keyCode===ct&&n&&!s){var c=i.pop(),l=!!c.id,u=c.id||c;(l?o:r)[u]=!1,a.setState({contactCounter:n-1,tokenizedItems:i})}},a.handleInviteItemClick=function(e,t){var n=a.state,r=n.selectedUsers,o=n.selectedEmails,i=e?r:o,s=t.id||t;i[s]||(i[s]=!0,a.addTokenItem(t))},a.handleSendMessage=function(){var e=a.getSelectedEmails(),t=a.getSelectedUsers(),n=a.props.dispatch;tt.a.create("ConversationsResource",{user_ids:t,emails:e,text:null}).callCreate().then(function(e){var t=e&&e.resource_response.data.id;n(Object(st.d)(t)),n(Object(st.c)(t))})},a.addTokenItem=function(e){var t=a.state,n=t.contactCounter,r=t.tokenizedItems;a.setState({contactCounter:n+1,tokenizedItems:r.concat([e]),value:""})},a.removeTokenItem=function(e){var t=a.state,n=t.contactCounter,r=t.tokenizedItems;n-=1,e.id?(r=r.filter(function(t){return t.id!==e.id}),a.setState({contactCounter:n,tokenizedItems:r})):a.setState({contactCounter:n,tokenizedItems:(r||[]).filter(function(t){return t!==e})})},a.renderSendMessageButton=function(){return Xe.a.createElement($e.a,{className:Qe()("sendNewMessageButton"),hasText:!0,onClick:a.handleSendMessage,showText:!0,text:Je.a._("Next","open the new chat"),type:"borderless"})},a.renderCancelMessageButton=function(){var e=a.props.handleCancelNewMessageClick;return Xe.a.createElement($e.a,{className:Qe()("cancelNewMessageView","cancelButton"),hasText:!0,onClick:e,showText:!0,text:Je.a._("Cancel","cancel new message view"),type:"borderless"})},r=n,h(a,r)}return f(t,e),t.prototype.getContactItem=function e(t,n,a){var r=t.emails,o=t.users;if(a&&o){return o[0].id===n?o[1]:o[0]}return r[0]},t.prototype.render=function e(){var t=this,n=this.props,a=n.conversationItems,r=n.viewerId,o=this.state,i=o.contactCounter,s=o.selectedUsers,c=o.selectedEmails,l=o.value,u=new Set,m=a.map(function(e,n){var a=e.emails,o=e.users;a||(a=[]),o||(o=[]);var i=o.length+a.length;if(i>0&&i<=2){var l=0===a.length,d=t.getContactItem(e,r,l);if(d){var m=d.id||d;if(!u.has(m))return u.add(m),Xe.a.createElement(p,{className:"conversationContactContainer",contactItem:d,conversationItem:e,currentUserID:r,handleContactWrapperClick:t.onHandleContactClick,isSelected:s[m]||c[m],isUser:l,key:m+"-"+n})}}return null});return Xe.a.createElement("div",null,Xe.a.createElement("div",{className:rt.a.conversationsGroupHeader},Xe.a.createElement("h1",{className:rt.a.newMessageTitle},Je.a._("New message","conversations")),i>0?this.renderSendMessageButton():this.renderCancelMessageButton()),Xe.a.createElement("div",{className:rt.a.conversationGroupTokenizedWrapper},Xe.a.createElement("div",{className:rt.a.tokenizedWrapperTitle},Je.a._("To:","new message")),Xe.a.createElement("div",{className:rt.a.socialTypeaheadContainer},Xe.a.createElement(d,{tokenizedItems:this.state.tokenizedItems}),Xe.a.createElement(nt.a,{changeOnTextHover:!1,className:Qe()(rt.a.typeahead,"reactNewMessageTypeahead"),onChange:function e(n){return t.setState({value:n})},onInviteItemClick:this.handleInviteItemClick,onKeyDown:this.handleTypeaheadKeyDown,showInputPlaceholder:!1,value:this.state.value}))),l?null:Xe.a.createElement("div",{className:"contactsContainer"},m))},t}(Ye.Component),pt=function e(t){return{viewerId:t.viewer.id}},dt=Object(ot.compose)(Object(Ze.connect)(pt))(ut),mt=n("OVW8"),ht=n.n(mt),ft=n("GGB8"),gt=n.n(ft),vt=n("W/Cr"),bt=n("nM9s"),yt=n("ZtCB"),Et=n.n(yt),Ct=n("5tOk"),_t=function(e){function t(){var n,a,r;g(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=a=v(this,e.call.apply(e,[this].concat(i))),a.state={boardInviteAccepted:!1,boardInvitePending:!0,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1},a.handleInviteResponse=function(e){var t=a.props.boardInviteItem,n=t.board,r=void 0===n?{}:n,o=t.invited_user,i=void 0===o?{}:o;a.setState({isAcceptButtonLoading:e,isIgnoreButtonLoading:!e});var s={board_id:r.id,invited_user_id:i.id},c=Et.a.create("BoardInviteResource",s);(e?c.callUpdate():c.callDelete()).then(function(){a.setState({boardInviteAccepted:e,boardInvitePending:!1,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1})})},r=n,v(a,r)}return b(t,e),t.prototype.getBoardRep=function e(t,n){return ht.a.createElement("div",{className:"leftObjectWrapper boardRepWrapper"},ht.a.createElement("div",{className:"Image Module boardMessageRep"},ht.a.createElement("div",{className:"heightContainer"},ht.a.createElement("img",{alt:t,src:n}))))},t.prototype.getBoardInfo=function e(t,n){return ht.a.createElement("a",{href:n},ht.a.createElement("div",{className:t},t))},t.prototype.getInviteeInfo=function e(t){var n=t.full_name;return ht.a.createElement("div",{className:"inviterLine"},Object(Ct.h)(vt.a._("{{ fullName }} invited you to this board"),{fullName:n}))},t.prototype.renderPendingLayout=function e(t,n){var a=this,r=t.image_thumbnail_url,o=t.name,i=t.url;return ht.a.createElement("div",{className:"pending"},ht.a.createElement("div",{className:"left"},this.getBoardRep(o,r),ht.a.createElement("div",{className:"description"},this.getBoardInfo(o,i),this.getInviteeInfo(n))),ht.a.createElement("div",{className:"actions"},ht.a.createElement(bt.a,{className:"remove",loading:this.state.isIgnoreButtonLoading,onClick:function e(){return a.handleInviteResponse(!1)},text:vt.a._("Ignore","ignore board invite")}),ht.a.createElement(bt.a,{className:gt()("primary","accept"),loading:this.state.isAcceptButtonLoading,onClick:function e(){return a.handleInviteResponse(!0)},text:vt.a._("Accept","accept board invite")})))},t.prototype.renderCompletedLayout=function e(t){var n=t.image_thumbnail_url,a=t.name,r=t.url;return ht.a.createElement("div",{className:"success displayed"},ht.a.createElement("div",{className:"left"},this.getBoardRep(a,n),ht.a.createElement("div",{className:"description"},this.getBoardInfo(a,r),ht.a.createElement("div",{className:"inviterLine"},vt.a._("You joined this board","board invites")))))},t.prototype.render=function e(){if(!this.state.boardInvitePending&&!this.state.boardInviteAccepted)return null;var t=this.props.boardInviteItem,n=t.board,a=t.invited_by_user;return ht.a.createElement("div",{className:"BoardInvite Module news"},this.state.boardInvitePending?this.renderPendingLayout(n,a):this.renderCompletedLayout(n))},t}(mt.Component),wt=_t,It=n("OVW8"),Ot=n.n(It),St=n("Grh7"),Nt=Object(St.a)({name:"BoardInvitesResource",key:"boardInvites",options:{current_user:!0,field_set_key:"news"}},{allowStale:!1})(y),Tt=n("OVW8"),kt=n.n(Tt),xt=n("W/Cr"),Pt=n("nM9s"),Rt=n("IaRT"),jt=n.n(Rt),Wt=n("ZtCB"),Bt=n.n(Wt),Dt=n("nX0T"),Mt=n("Kqaz"),Ht=500,At="existingConversationsView",Ut="newMessageView",Vt="contactRequestsView",Lt=kt.a.createElement("div",{className:"icon"}),Ft=kt.a.createElement("div",{className:"boardInvitesContainer"},kt.a.createElement(Nt,null)),Gt=function(e){function t(){var n,a,r;E(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=a=C(this,e.call.apply(e,[this].concat(i))),a.state={bookmarks:null,conversationItems:[],conversationItemsHaveFetched:!1,fetching:!1,currentView:At},a.onhandleCancelSecondaryView=function(){a.setState({currentView:At})},a.handleNewMessageButtonClick=function(){a.setState({currentView:Ut}),a.logNewMessageButtonClick()},a.handleViewContactRequestsClick=function(){a.setState({currentView:Vt})},a.handleScroll=function(){if(!a.state.fetching){(a._container&&a._container.scrollHeight-a._container.scrollTop-a._container.clientHeight)<Ht&&a.fetchMore()}},a.logNewMessageButtonClick=function(){(0,a.props.contextLog)(101,{component:54,element:275})},a.updateWithConversationResponse=function(e){var t=e.resource_response.data;a.setState({bookmarks:e.bookmarks,conversationItems:a.state.conversationItems.concat(t),conversationItemsHaveFetched:!0,fetching:!1})},r=n,C(a,r)}return _(t,e),t.prototype.componentDidMount=function e(){this._container.addEventListener("scroll",this.handleScroll),this.setState({fetching:!0}),Bt.a.create("ConversationsResource").callGet({showError:!1}).then(this.updateWithConversationResponse)},t.prototype.componentWillUnmount=function e(){this._container.removeEventListener("scroll",this.handleScroll)},t.prototype.fetchMore=function e(){if(!this.state.fetching){this.setState({fetching:!0});var t=Bt.a.create("ConversationsResource",{bookmarks:this.state.bookmarks});if(t.atEnd())return this._container.removeEventListener("scroll",this.handleScroll),void this.setState({fetching:!1});t.callGet({showError:!1}).then(this.updateWithConversationResponse)}},t.prototype.renderNewMessageView=function e(){return kt.a.createElement("div",{className:"newMessageContainer"},kt.a.createElement(dt,{conversationItems:this.state.conversationItems,handleCancelNewMessageClick:this.onhandleCancelSecondaryView}))},t.prototype.renderContactRequestsView=function e(){return kt.a.createElement("div",{className:"contactRequestsContainer"},kt.a.createElement(de,{handleCancelViewContactRequests:this.onhandleCancelSecondaryView}))},t.prototype.renderEmptyMessagesNewMessageUpsell=function e(){return kt.a.createElement("div",{className:"EmptyConversations Module"},Lt,kt.a.createElement("div",{className:"intro"},kt.a.createElement("div",null,xt.a._("Send messages to your friends!")),kt.a.createElement("div",null,xt.a._("Plan projects, swap ideas and share your best discoveries."))))},t.prototype.renderExistingConversationsView=function e(){var t=this.state,n=t.conversationItems,a=t.conversationItemsHaveFetched;return kt.a.createElement("div",{className:"existingConversationsContainer"},kt.a.createElement("div",{className:"newMessageButtonContainer"},kt.a.createElement(Pt.a,{className:"createConversationTab",hasIcon:!0,onClick:this.handleNewMessageButtonClick,text:xt.a._("New message"),type:"borderless"})),kt.a.createElement("div",{className:"viewContactRequestsButtonContainer"},kt.a.createElement(oe,{onClick:this.handleViewContactRequestsClick})),kt.a.createElement("div",{className:"existingConversationItemsWrapper"},Ft,kt.a.createElement("ul",{className:"conversationItems"},0===n.length&&a?this.renderEmptyMessagesNewMessageUpsell():n.map(function(e){return kt.a.createElement("li",{className:"conversationItemWrapper",key:e.id},kt.a.createElement(De,{data:e}))}))))},t.prototype.renderMessageView=function e(){switch(this.state.currentView){case At:return this.renderExistingConversationsView();case Ut:return this.renderNewMessageView();case Vt:return this.renderContactRequestsView()}},t.prototype.render=function e(){var t=this,n=this.context.userAgent.isMobile,a=n?{height:"100vh"}:void 0;return kt.a.createElement(Dt.a,{view:42,viewParameter:203},kt.a.createElement("div",{className:"conversationPanel",ref:function e(n){t._container=n},style:a},this.renderMessageView()))},t}(Tt.Component);Gt.contextTypes={userAgent:jt.a.shape({isMobile:jt.a.bool.isRequired})};var zt=Object(Mt.a)(Gt),qt=n("OVW8"),Yt=n.n(qt),Xt=n("GGB8"),Zt=n.n(Xt),Kt=n("IaRT"),Qt=n.n(Kt),Jt={ONE:1,TWO:2,END:3},$t=function(e){function t(){var n,a,r;w(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=a=I(this,e.call.apply(e,[this].concat(i))),a.state={educationStep:Jt.ONE},a.toStepTwo=function(){a.setState({educationStep:Jt.TWO})},a.dismissEducation=function(){var e=a.props.handleDismiss;a.setState({educationStep:Jt.END}),e()},r=n,I(a,r)}return O(t,e),t.prototype.componentDidMount=function e(){var t=this,n=this.props.stepDelay;this.educationStepTimer=setTimeout(function(){t.state.educationStep<Jt.TWO&&t.setState({educationStep:Jt.TWO})},n)},t.prototype.componentWillUnmount=function e(){clearTimeout(this.educationStepTimer)},t.prototype.renderPill=function e(t,n,a){return Yt.a.createElement("button",{onClick:a,className:Zt()("educationPill","slideIn",{fadeOut:n})},Yt.a.createElement("div",{className:"message"},t))},t.prototype.render=function e(){var t=this.state.educationStep,n=this.props,a=n.titleText,r=n.titleText2,o=this.renderPill(a,t===Jt.TWO,this.toStepTwo),i=this.renderPill(r,t===Jt.END,this.dismissEducation);return Yt.a.createElement("div",{className:"newsHubEducation"},Yt.a.createElement("div",{className:"educationStep stepOne"},(t===Jt.ONE||t===Jt.TWO)&&o),Yt.a.createElement("div",{className:"educationStep stepTwo bottom"},(t===Jt.TWO||t===Jt.END)&&i))},t}(qt.Component),en=$t,tn=n("OVW8"),nn=n.n(tn),an=n("IaRT"),rn=n.n(an),on=n("AYde"),sn=n("gEaE"),cn=n("AsH/"),ln="136x136",un="100x",pn=function(e){function t(){return S(this,t),N(this,e.apply(this,arguments))}return T(t,e),t.prototype.getImageProps=function e(t){switch(t.type){case cn.c.PIN:return{alt:t.description,src:(t.images["136x136"]||{}).url};case cn.c.BOARD:return{alt:t.name,src:(t.image_thumbnail_urls||{})["100x"]};case cn.c.USER:return{alt:t.full_name,src:t.image_large_url};default:return{}}},t.prototype.render=function e(){var t=this.props,n=t.headerIconImageUrl,a=t.headerIconObjects,r=t.i18n;if(n)return nn.a.createElement(sn.t,{width:cn.b,height:cn.b,shape:"circle"},nn.a.createElement(sn.p,{alt:r._("Pinterest recommendation","label for notification with recommended content"),color:"#fff",naturalHeight:cn.b,naturalWidth:cn.b,src:n}));if(a&&a.length>0){var o=a[0];return nn.a.createElement("div",{className:"borderRadiusFix"},o.type===cn.c.USER?nn.a.createElement("div",{style:{height:cn.b,width:cn.b}},nn.a.createElement(sn.a,{src:o.image_large_url,name:o.full_name})):nn.a.createElement("div",{className:"fourPixelMask",style:{height:cn.b,width:cn.b}},nn.a.createElement(sn.p,Object.assign({color:"#fff",naturalHeight:cn.b,naturalWidth:cn.b},this.getImageProps(o)))))}},t}(tn.Component),dn=Object(on.b)(pn),mn=n("OVW8"),hn=n.n(mn),fn=n("kopg"),gn=n("IaRT"),vn=n.n(gn),bn=146,yn=4,En="170x",Cn=296,_n=n("OVW8"),wn=n.n(_n),In=n("IaRT"),On=n.n(In),Sn=n("acfG"),Nn=n("gEaE"),Tn=146,kn=296,xn=n("OVW8"),Pn=n.n(xn),Rn=n("tPsC"),jn=n("9n23"),Wn=n("wPZC"),Bn=n("tmfO"),Dn=n("Wc91"),Mn=n("IaRT"),Hn=n.n(Mn),An=n("Kqaz"),Un=n("MQ2h"),Vn=n.n(Un),Ln=n("AsH/"),Fn=n("AYde"),Gn=n("gEaE"),zn=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),qn={BASIC:0,TEXT:1,ROW_WITH_COUNT:2,GRID:3,MINI_PIN_GRID:4,CAROUSEL:5,LIST:6,TWO_ROW_WITH_COUNT:7,NO_ICON_TEXT:8,NO_ICON_ROW_WITH_COUNT:9,ROW_WITH_COUNT_2:10,MINI_PIN_GRID_2:11,MINI_BOARD_GRID:12,MINI_USER_GRID:13,MINI_SEARCH_GRID:14,MINI_INTEREST_GRID:15},Yn=2,Xn=4,Zn=146,Kn=73,Qn=[qn.MINI_PIN_GRID_2,qn.MINI_BOARD_GRID,qn.MINI_USER_GRID,qn.MINI_SEARCH_GRID,qn.MINI_INTEREST_GRID],Jn=function(e){function t(){var n,a,r;P(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=a=R(this,e.call.apply(e,[this].concat(i))),a.handleClick=function(){var e=a.props,t=e.contextLog,n=e.handleClick;t(101,{objectId:e.id,view:107,viewParameter:3081}),n()},r=n,R(a,r)}return j(t,e),t.prototype.canBeSupportedByDisplayModes=function e(t,n){return n.some(function(e){return t&1<<e})},t.prototype.render=function e(){var t=this.props,n=t.headerIconImageUrl,a=t.headerIconObjects,r=t.headerText,o=t.i18n,i=t.id,s=t.lastUpdatedAt,c=t.overrideClickUrl,l=t.siteType,u=t.textMapping,p=t.unread,d=c||"/news_hub/"+i,m=Object(jn.a)({currentSiteType:l,destinationSiteType:0,inputPath:d}),h=this.displayComponent,f=Pn.a.createElement(Gn.t,{height:8,shape:"circle",width:8},Pn.a.createElement("div",{style:{backgroundColor:"#bd081c",width:8,height:8}})),g=864e5,v=new Date,b=new Date(s);return v.getTime()-b.getTime()>864e5&&b.setHours(0,0,0,0),Pn.a.createElement(Bn.b,{className:"newsHubItem",to:m,onClick:this.handleClick},Pn.a.createElement("div",{className:"newsHubCell"},Pn.a.createElement(Gn.b,{xs:{display:"flex"}},Pn.a.createElement(dn,{headerIconImageUrl:n,headerIconObjects:a,id:i}),Pn.a.createElement(Gn.b,null,Pn.a.createElement(Gn.b,{xs:{display:"flex"},alignItems:"center"},Pn.a.createElement("div",{className:"newsText"},Pn.a.createElement(Dn.a,{text:r,textMapping:u})),p&&f),Pn.a.createElement("div",{className:"newsTimestamp"},o.getHumanizedTimesince(b.getTime())),!!h&&Pn.a.createElement("div",{className:"newsComponent"},h)))))},zn(t,[{key:"displayComponent",get:function e(){var t=this.props,n=t.contentItemCount,a=t.contentItems,r=t.contentText,o=t.displayMode,i=this.context.userAgent.isMobile,s=a.filter(function(e){return e.content_object}).map(function(e){return e.content_object});if(i&&this.canBeSupportedByDisplayModes(o,Qn))return null;if(this.canBeSupportedByDisplayModes(o,[qn.MINI_PIN_GRID_2])){var c=s.map(function(e){return e.images["136x136"]}).slice(0,4);return Pn.a.createElement(Wn.a,{height:146,pins:c,pinWidth:73,storyType:Ln.c.PIN})}if(this.canBeSupportedByDisplayModes(o,[qn.MINI_BOARD_GRID]))return Pn.a.createElement(k,{board:s[0]});if(this.canBeSupportedByDisplayModes(o,[qn.MINI_USER_GRID])){var l=s[0];return Pn.a.createElement(Wn.a,{height:146,pins:l.recent_pin_images["200x"].slice(0,4),pinWidth:73,storyType:Ln.c.USER,user:l})}if(this.canBeSupportedByDisplayModes(o,[qn.ROW_WITH_COUNT_2]))return Pn.a.createElement(Rn.a,{previewItemCount:n,previewItems:s});if(this.canBeSupportedByDisplayModes(o,[qn.MINI_INTEREST_GRID]))return Pn.a.createElement(x,{interests:s.slice(0,2)});if(this.canBeSupportedByDisplayModes(o,[qn.MINI_SEARCH_GRID])){var u=s[0].images.map(function(e){return{url:e}}).slice(0,4);return Pn.a.createElement(Wn.a,{height:146,pins:u,pinWidth:73,search:s[0].term,storyType:Ln.c.SEARCH})}return this.canBeSupportedByDisplayModes(o,[qn.BASIC])?null:this.canBeSupportedByDisplayModes(o,[qn.TEXT])?Pn.a.createElement("div",{className:"newsText"},r):void 0}}]),t}(xn.Component);Jn.defaultProps={handleClick:function e(){}},Jn.contextTypes={userAgent:Hn.a.shape({isMobile:Hn.a.bool.isRequired})};var $n=Object(Un.compose)(An.a,Fn.b)(Jn),ea=n("OVW8"),ta=n.n(ea),na=n("SnoN"),aa=n("mnfW"),ra=n("IaRT"),oa=n.n(ra),ia=n("RvAN"),sa=n("nX0T"),ca=n("Kqaz"),la=n("mHth"),ua=n("AYde"),pa=n("YZkw"),da=n("MQ2h"),ma=n.n(da),ha=n("gEaE"),fa=4,ga=864e5,va=function(e){function t(n){W(this,t);var a=B(this,e.call(this,n));return a.state={shouldEducate:!1},a.onDataFetched=function(e){a.props.experience&&e>fa&&!a.state.shouldEducate&&a.setState({shouldEducate:!0})},a.handleItemClick=function(){a.handleComplete(),a.props.handleItemClick()},a.handleComplete=function(){var e=a.props,t=e.experienceClient,n=e.experience;n&&t.completeExperience(n.placement_id,n.experience_id)},a.handleDismiss=function(){var e=a.props,t=e.experienceClient,n=e.experience;n&&t.dismissExperience(n.placement_id,n.experience_id)},a.renderItem=function(e,t){return ta.a.createElement("li",{className:"newsHubItemWrapper",key:t},a.renderDate(e.last_updated_at,t),ta.a.createElement($n,{contentItemCount:e.content_item_count,contentItems:e.content_items,contentText:e.content_text,displayMode:e.encoded_display_mode,handleClick:a.handleItemClick,headerIconImageUrl:e.header_icon_image_url,headerIconObjects:e.header_icon_objects,headerText:e.header_text,id:e.id,lastUpdatedAt:e.last_updated_at,overrideClickUrl:e.override_click_url,subHeaderText:e.sub_header_text,siteType:a.props.siteType,textMapping:e.text_mapping,type:e.type,unread:e.unread}))},a.renderEmptyState=function(){var e=a.props.i18n;return ta.a.createElement("div",{className:"newsHubPanel"},ta.a.createElement(ha.b,{xs:{display:"flex"},justifyContent:"center",color:"darkGray",shape:"pill",dangerouslySetInlineStyle:{__style:{padding:"20px 0px",margin:20}}},ta.a.createElement(ha.g,{xs:10},ta.a.createElement(ha.E,{bold:!0,color:"white",size:"lg"},e._("New! Discover ideas from your friends, followers and people who love your Pins!")))))},a.currentDay=null,a.today=new Date,a.today.setHours(0,0,0,0),a}return D(t,e),t.prototype.getChildContext=function e(){return{preloadingSupported:!0}},t.prototype.componentDidMount=function e(){var t=this.props,n=t.experience,a=t.experienceClient;n&&a.viewExperience(n.placement_id,n.experience_id),this.logPanelImpression()},t.prototype.shouldComponentUpdate=function e(t,n){if(this.state.shouldEducate===n.shouldEducate){var a=this.props.experience,r=t.experience;return(a||{}).id!==(r||{}).id}return!0},t.prototype.getEducation=function e(){var t=this.props.experience;if(this.state.shouldEducate&&t){var n=t.display_data,a=n.step_delay,r=n.title_text,o=n.title_text_2;return ta.a.createElement(en,{handleDismiss:this.handleDismiss,stepDelay:a,titleText:r,titleText2:o})}return null},t.prototype.logPanelImpression=function e(){var t=this.props.contextLog,n=na.a.getInstance(),a=n.getViewFromContext();t(13,{view:107,viewParameter:3081}),n.addViewToContext(a)},t.prototype.renderDate=function e(t,n){var a=this.props.i18n,r=new Date(t);if(r.setHours(0,0,0,0),0!==n&&null!==this.currentDay&&void 0!==this.currentDay){var o=this.currentDay;if(r.getTime()===o.getTime())return null}this.currentDay=r;var i=void 0;return i=r.getTime()===this.today.getTime()?a._("Today"):r.getTime()===new Date(this.today-864e5).getTime()?a._("Yesterday"):r&&r>=new Date(this.today-5184e5)?a.getHumanizedTimesince(r.toString()):aa.b.formatDate(this.props.locale,r,aa.b.DateFormatType.MONTH_DAY,!1),ta.a.createElement("div",{className:"newsHubItemDate"},i)},t.prototype.render=function e(){return ta.a.createElement(sa.a,{view:107,viewParameter:3081},ta.a.createElement("div",null,this.getEducation(),ta.a.createElement(ia.a,{className:"newsHubPanel",onDataFetched:this.onDataFetched,renderEmptyState:this.renderEmptyState,renderItem:this.renderItem,resourceName:"NewsHubResource"})))},t}(ea.Component);va.defaultProps={handleItemClick:function e(){}},va.childContextTypes={preloadingSupported:oa.a.bool.isRequired};var ba=Object(da.compose)(Object(pa.a)(1000035),ca.a,ua.b,la.a)(va),ya=n("OVW8"),Ea=n.n(ya),Ca=n("IaRT"),_a=n.n(Ca),wa=n("xYG1"),Ia=Ea.a.createElement(zt,null),Oa=function(e){function t(){return M(this,t),H(this,e.apply(this,arguments))}return A(t,e),t.prototype.shouldComponentUpdate=function e(t,n){return this.props.currentPanel!==t.currentPanel||this.props.conversationsUnseenCount!==t.conversationsUnseenCount||this.props.newsHubCount!==t.newsHubCount},t.prototype.render=function e(){var t=this.props,n=t.conversationsUnseenCount,a=t.currentPanel,r=t.handleItemClick,o=t.locale,i=t.newsHubCount,s=t.onButtonClick,c=t.siteType,l=void 0;return a===wa.a.NEWS_HUB?l=Ea.a.createElement(ba,{handleItemClick:r,locale:o,siteType:c}):a===wa.a.INBOX&&(l=Ia),Ea.a.createElement("div",{className:"NewsConversationsDropdown"},Ea.a.createElement(wa.b,{conversationsUnseenCount:n,newsHubCount:i,onButtonClick:s,selectedTab:a}),Ea.a.createElement("div",{className:"content"},l))},t}(ya.Component),Sa=t.default=Oa},IxI0:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t=e.boardId,n=i(e,["boardId"]);return Object(w.createElement)(Object(x.a)({name:"BoardFeedResource",options:{board_id:t,page_size:50,field_set_key:"board_cover_picker"},key:"pins"},{allowStale:!1})(P),Object.assign({boardId:t},n))}function p(e){var t=e.alignTop,n=e.children,a=e.label,r=e.labelId;return A.a.createElement(U.b,{alignItems:t?null:"center",padding:{x:2,y:3},xs:{display:"flex"},wrap:!0},A.a.createElement(U.b,{padding:{y:2},xs:{column:12},md:{column:3}},A.a.createElement(V,{label:a,labelId:r})),A.a.createElement(U.b,{xs:{column:12},md:{column:9}},n))}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=n("OVW8"),g=n.n(f),v=n("5tOk"),b=n("W/Cr"),y=n("nM9s"),E="236x",C=function(e){function t(){var n,o,i;a(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=o=r(this,e.call.apply(e,[this].concat(c))),o.state={deltaY:0,deltaX:0,holderHeight:0,holderWidth:0,isSpinnerShown:!0,startBgPos:{left:0,top:0}},o.handleUpdateImage=function(){var e=o.image,t=e.offsetHeight,n=e.offsetWidth;o.setState({isSpinnerShown:!1,startBgPos:{left:-(n-o.state.holderWidth)/2,top:-(t-o.state.holderHeight)/2}})},o.handleOnMouseUp=function(){o.isDragging=!1,o.setState({startBgPos:{left:o.getBgLeft(),top:o.getBgTop()},deltaX:0,deltaY:0}),o.props.updateImgCrop(o.getCropData())},i=n,r(o,i)}return o(t,e),t.prototype.componentDidMount=function e(){var t=this.holder;this.setState({holderHeight:t.offsetHeight,holderWidth:t.offsetWidth}),document.body.addEventListener("mouseup",this.handleOnMouseUp,!1)},t.prototype.componentWillReceiveProps=function e(t){t.pin.id!==this.props.pin.id&&this.setState({isSpinnerShown:!0})},t.prototype.componentWillUnmount=function e(){document.body.removeEventListener("mouseup",this.handleOnMouseUp)},t.prototype.getFrameBounds=function e(){var t=this.props,n=t.frameHeight,a=t.frameWidth,r=this.state,o=r.holderHeight;return{left:r.holderWidth/2-a/2,width:a,height:n,top:o/2-n/2}},t.prototype.getBgLeft=function e(){var t=this.props.frameWidth,n=this.getFrameBounds(),a=this.getImgScale(),r=this._getImageDimensions(),o=r.imgHeight*a,i=r.imgWidth*a,s=0;return o&&i&&(s=this.state.startBgPos.left+this.state.deltaX,s+i-t<n.left&&(s=n.left-i+t),s>n.left&&(s=n.left)),s},t.prototype.getBgTop=function e(){var t=this.props.frameHeight,n=this.getFrameBounds(),a=this.getImgScale(),r=this._getImageDimensions(),o=r.imgHeight*a,i=r.imgWidth*a,s=0;return o&&i&&(s=this.state.startBgPos.top+this.state.deltaY,s+o-t<n.top&&(s=n.top-o+t),s>n.top&&(s=n.top)),s},t.prototype.getImgScale=function e(){var t=this.props,n=t.frameHeight,a=t.frameWidth,r=this._getImageDimensions(),o=r.imgHeight,i=r.imgWidth,s=this.getFrameBounds();if(o&&i){var c=o/i;return c=c>=s.height/s.width?a/i:n/o}return 1},t.prototype.getImageBounds=function e(){var t=this._getImageDimensions(),n=t.imgHeight,a=t.imgWidth,r={};if(n&&a){var o=this.getImgScale();r={width:o*a,height:o*n}}return r},t.prototype.getBgBounds=function e(){return{left:this.getBgLeft(),top:this.getBgTop()}},t.prototype.getCropData=function e(){var t=this.props,n=t.frameHeight,a=t.frameWidth,r=this.getFrameBounds(),o=this._getImageDimensions(),i=o.imgHeight,s=o.imgWidth,c=this.getBgBounds(),l=this.getImgScale();return{crop_x:Math.round(-(c.left-r.left)/l),crop_y:Math.round(-(c.top-r.top)/l),nativeHeight:i,nativeWidth:s,height:Math.round(n/l),width:Math.round(a/l),scale:1}},t.prototype.handleOnMouseDown=function e(t){0===t.nativeEvent.button&&(t.stopPropagation(),this.isDragging=!0,this.originX=t.pageX,this.originY=t.pageY)},t.prototype.handleOnMouseMove=function e(t){this.isDragging&&this.setState({deltaX:t.pageX-this.originX,deltaY:t.pageY-this.originY})},t.prototype._getImageDimensions=function e(){var t=this.props.pin,n=t.images["236x"];return{imgHeight:n.height,imgWidth:n.width}},t.prototype.render=function e(){var t=this,n=this.props,a=n.boardName,r=n.frameHeight,o=n.frameWidth,i=n.isFirst,s=n.isLast,c=n.pin,l=n.showNextPin,u=n.showPrevPin,p=this.state.isSpinnerShown,d=this._getImageDimensions(),m=d.imgHeight,h=d.imgWidth,f=this.getFrameBounds(),E=this.getImageBounds(),C=this.getBgBounds(),_="";return m&&h&&(_="in"),g.a.createElement("div",{className:"ImageCrop"},g.a.createElement("div",{className:"holder",ref:function e(n){t.holder=n}},g.a.createElement("div",{className:"bg",style:C},g.a.createElement("img",{alt:v.c(b.a._("Board cover for {{ boardName }}"),{boardName:a}),className:_,onLoad:this.handleUpdateImage,ref:function e(n){t.image=n},src:c.images["236x"].url,style:E})),g.a.createElement("div",{className:"mask"},g.a.createElement("span",{style:{top:0,left:0,right:0,height:f.top}}),g.a.createElement("span",{style:{top:f.top,left:f.left+o,right:0,height:r}}),g.a.createElement("span",{style:{top:r+f.top,left:0,right:0,bottom:0}}),g.a.createElement("span",{style:{top:f.top,left:0,width:f.left,height:r}})),g.a.createElement("div",{className:"frame",style:f}),g.a.createElement("div",{className:"drag",onMouseDown:function e(n){t.handleOnMouseDown(n)},onMouseMove:function e(n){t.handleOnMouseMove(n)}}),g.a.createElement("div",{className:"spinner",style:{display:p?"":"none"}})),i?null:g.a.createElement(y.a,{className:"previous",onClick:u,text:""}),s?null:g.a.createElement(y.a,{className:"next",onClick:l,text:""}))},t}(f.Component);C.defaultProps={frameHeight:111,frameWidth:236};var _=C,w=n("OVW8"),I=n.n(w),O=n("/e0Y"),S=n("W/Cr"),N=n("nM9s"),T=n("ZtCB"),k=n.n(T),x=n("Grh7"),P=function(e){function t(){var n,a,r;s(this,t);for(var o=arguments.length,i=Array(o),l=0;l<o;l++)i[l]=arguments[l];return n=a=c(this,e.call.apply(e,[this].concat(i))),a.state={coverPinIndex:0,imgCropData:{},isSaving:!1},a.handleSave=function(){a.setState({isSaving:!0});var e=a.props,t=e.pins,n=void 0===t?{}:t,r=e.boardId,o=a.state,i=o.coverPinIndex,s=o.imgCropData,c=n[i],l=c.images["236x"],u=l.url;O.a.trackEvent("board_edit_cover","click_submit");var p=Object.assign({pin_id:c.id,pin_image_url:u},s),d=Object.assign({board_id:r,url:u},p);k.a.create("BoardResource",d).callUpdate().then(function(){O.a.trackEvent("board_edit_cover","success"),a.setState({isSaving:!1}),a.props.onSave(u,{height:l.height,width:l.width,x:s.crop_x,y:s.crop_y})}).catch(function(){a.setState({isSaving:!1})})},a.updateImgCrop=function(e){a.setState({imgCropData:e})},r=n,c(a,r)}return l(t,e),t.prototype.componentDidUpdate=function e(t){var n=this.props.pins,a=t.pins;(n&&a!==n&&n.length||n&&a&&n.length!==a.length)&&n.forEach(function(e){(new Image).src=e.url})},t.prototype.changePin=function e(t){t<0||t>=this.props.pins.length||this.setState({coverPinIndex:t})},t.prototype.render=function e(){var t=this,n=this.props,a=n.boardName,r=n.frameHeight,o=n.frameWidth,i=n.pins,s=this.state,c=s.coverPinIndex,l=s.isSaving;return i?I.a.createElement("div",{className:"BoardCoverEditPage"},I.a.createElement("div",{className:"standardForm"},I.a.createElement("h1",null,I.a.createElement("strong",null,S.a._("Change Board Cover"))," / "+a),I.a.createElement("div",{className:"boardCoverEditPageContainer"},I.a.createElement("div",{className:"BoardCoverEdit"},I.a.createElement(_,{boardName:a,frameHeight:r,frameWidth:o,isFirst:!c,isLast:c===i.length-1,pin:i[c],showNextPin:function e(){t.changePin(c+1)},showPrevPin:function e(){t.changePin(c-1)},updateImgCrop:this.updateImgCrop})),I.a.createElement("div",{className:"formFooter"},I.a.createElement("div",{className:"formFooterButtons"},I.a.createElement(N.a,{isSaving:l,onClick:this.props.onCancel,text:S.a._("Cancel")}),I.a.createElement(N.a,{onClick:this.handleSave,text:S.a._("Save Changes"),type:"primary"})))))):null},t}(w.Component);u.propTypes={boardId:w.PropTypes.string.isRequired};var R=n("OVW8"),j=n.n(R),W=n("gEaE"),B=j.a.createElement(W.i,null),D=function e(t){var n=t.children;return j.a.createElement(W.b,{role:"list"},j.a.Children.map(n,function(e,t){return e&&j.a.createElement(W.b,{key:t},e,B)}))},M=D,H=n("OVW8"),A=n.n(H),U=n("gEaE"),V=function e(t){var n=t.label,a=t.labelId;return a?A.a.createElement(U.q,{htmlFor:a},A.a.createElement(U.E,{size:"sm"},n)):A.a.createElement(U.E,{size:"sm"},n)};p.PropTypes={alignTop:H.PropTypes.bool,children:H.PropTypes.node,labelId:H.PropTypes.string,label:H.PropTypes.string};var L=n("OVW8"),F=n.n(L),G=n("DUIN"),z=n("FrUj"),q=n("BAXv"),Y=n("/e0Y"),X=n("W/Cr"),Z=n("LQgx"),K=n("gEaE"),Q=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),J=F.a.createElement(K.i,null),$=function(e){function t(n){d(this,t);var a=m(this,e.call(this,n));return a.handleChangeName=function(e){var t=z.getErrors(a.nameValidators,e);a.setState({name:e,nameValidatorErrors:t})},a.handleChangeDescription=function(e){var t=z.getErrors(a.descriptionValidators,e);a.setState({description:e,descriptionValidatorErrors:t})},a.handleChangeCategory=function(e){var t=e.value;a.setState({category:t})},a.handleChangePrivateToggle=function(e){a.setState({privacy:e?"secret":"public"})},a.handleChangeCollabBoardEmail=function(e){a.setState({collab_board_email:e})},a.handleChangeCollaboratorInvitesEnabled=function(e){a.setState({collaboratorInvitesEnabled:e})},a.handleCancel=function(){Y.a.trackEvent(a.props.gaCategory,"click_cancel"),a.props.onClose()},a.handleSubmit=function(e){e&&e.preventDefault(),a.submitDisabled()||(Y.a.trackEvent(a.props.gaCategory,"click_submit"),a.props.onSubmit(a.fieldValues))},a.handleDelete=function(){a.props.onDeleteButtonClick()},a.handleShowBoardCoverEditModal=function(){a.setState({showBoardCoverEdit:!0})},a.handleHideBoardCoverEditModal=function(){a.setState({showBoardCoverEdit:!1})},a.handleSaveBoardCoverEditModal=function(){var e;a.handleHideBoardCoverEditModal(),(e=a.props).onCropChange.apply(e,arguments)},a.state=Object.assign({},n.board,{collaboratorInvitesEnabled:n.board.collaborator_invites_enabled||!1,nameValidatorErrors:[],descriptionValidatorErrors:[],showBoardCoverEdit:!1,showDeleteConfirmation:!1}),a.descriptionValidators=[z.Length({max:q.a.MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION})],a.nameValidators=[z.Required({message:X.a._("Don't forget to name your board!")}),z.Length({max:q.a.MAX_CHARS_FOR_BOARD_TITLE})],a}return h(t,e),t.prototype.getBoardTitleInput=function e(){var t=this.state,n=t.name,a=t.nameValidatorErrors;return F.a.createElement(K.b,{role:"listitem"},F.a.createElement(p,{label:X.a._("Name"),labelId:"boardEditName"},F.a.createElement(K.G,{errorMessage:a.join(", "),id:"boardEditName",name:"boardName",onChange:this.handleChangeName,placeholder:X.a._('Like "Places to Go" or "Recipes to Make"'),value:n})))},t.prototype.getCategoriesDropdown=function e(){var t=this.props.categories.map(function(e){return{label:e.name,value:e.key}}),n={value:"",label:X.a._("What kind of board is it?")},a=[n].concat(t),r=this.state.category||"";return F.a.createElement(K.b,{role:"listitem"},F.a.createElement(p,{label:X.a._("Category"),labelId:"boardEditCategory"},F.a.createElement(K.A,{id:"boardEditCategory",name:"category",onChange:this.handleChangeCategory,options:a,value:r})))},t.prototype.getCollaboratorsEmailCheckbox=function e(){var t=this.props.board,n=this.state.collab_board_email;return t.is_collaborative&&F.a.createElement(K.b,{role:"listitem"},F.a.createElement(p,{label:X.a._("Email notifications"),labelId:"secret"},F.a.createElement(K.b,{alignItems:"center",padding:{y:2},xs:{display:"flex"}},F.a.createElement(K.b,{margin:{right:1}},F.a.createElement(K.C,{switched:n,id:"emailCheckbox",name:"email",onChange:this.handleChangeCollabBoardEmail})),F.a.createElement(K.E,{size:"xs",smSize:1,mdSize:2,lgSize:"xs"},X.a._("Get an email when someone saves Pins to this board")))))},t.prototype.getCollaboratorsInviteList=function e(){var t=this.props,n=t.boardCollaboratorsSection,a=t.showCollaboratorsLearnMore,r=F.a.createElement(K.b,null,X.a._("Collaborators"),a&&F.a.createElement(K.b,null,F.a.createElement(K.s,{target:"blank",href:q.a.GEN.templateConst.settings.HELP_BOARDS_INVITE_URL_SRC_CREATE},F.a.createElement(K.E,{size:"sm",smSize:2,mdSize:"xs",lgSize:"sm"},X.a._("Learn more")))));return F.a.createElement(K.b,{role:"listitem"},F.a.createElement(p,{alignTop:!0,label:r,labelId:"collaborators"},F.a.createElement(K.b,{padding:{y:2}},F.a.createElement("div",{className:"boardCollaboratorsWrapper"},n))))},t.prototype.getCollaboratorsInviteToggle=function e(){var t=this.props.board,n=this.state.collaboratorInvitesEnabled;return t.is_collaborative&&F.a.createElement(K.b,{role:"listitem"},F.a.createElement(p,{label:X.a._("Let collaborators add people"),labelId:"collaboratorInvitesEnabledCheckbox"},F.a.createElement(K.b,{padding:{y:2}},F.a.createElement(K.C,{switched:n,id:"collaboratorInvitesEnabledCheckbox",name:"collaboratorInvitesEnabled",onChange:this.handleChangeCollaboratorInvitesEnabled}))))},t.prototype.getCoverEdit=function e(){var t=this.props,n=t.coverImageHeight,a=t.coverImageWidth,r=t.isEditable,o=this.state,i=o.id,s=o.name,c=o.pin_count;return r&&c>0&&F.a.createElement(K.b,{role:"listitem"},F.a.createElement(p,{label:X.a._("Cover")},F.a.createElement(K.c,{inline:!0,onClick:this.handleShowBoardCoverEditModal,text:X.a._("Change"),size:"md"}),this.state.showBoardCoverEdit&&F.a.createElement(Z.a,{onHide:this.handleHideBoardCoverEditModal},F.a.createElement(u,{boardId:i,boardName:s,frameHeight:n,frameWidth:a,onCancel:this.handleHideBoardCoverEditModal,onSave:this.handleSaveBoardCoverEditModal}))))},t.prototype.getDescriptionInput=function e(){var t=this.state,n=t.description,a=t.descriptionValidatorErrors;return F.a.createElement(K.b,{role:"listitem"},F.a.createElement(p,{alignTop:!0,label:X.a._("Description"),labelId:"boardEditDescription"},F.a.createElement(K.F,{errorMessage:a.join(", "),id:"boardEditDescription",name:"description",onChange:this.handleChangeDescription,placeholder:X.a._("What's your board about?"),value:n})))},t.prototype.getFormFooter=function e(){var t=this.props,n=t.board.id,a=t.creating,r=t.deleting,o=t.updating,i=t.isDeletable,s=t.submitText,c=a,l=r&&r[n],u=o&&o[n],p=void 0,d=c&&c.error||l&&l.error||u&&u.error;d&&(p=X.a._("Uh oh! Something went wrong."),d.message?p=d.message:"string"==typeof d&&(p=d));var m=this.submitDisabled()||c&&c.creating||u&&u.updating||l&&l.deleting;return F.a.createElement(K.b,{alignItems:"center",justifyContent:"between",padding:{x:2,y:3},wrap:!0,xs:{display:"flex"}},i&&F.a.createElement(K.b,{margin:{right:"auto"}},F.a.createElement(K.c,{id:"deleteBoardButton",inline:!0,disabled:l,onClick:this.handleDelete,text:X.a._("Delete board"),size:"md"})),p&&F.a.createElement(K.b,{padding:{x:1}},F.a.createElement(K.E,{color:"red",smSize:"xs",mdSize:"sm",lgSize:"md"},p)),F.a.createElement(K.b,{margin:{left:"auto"}},F.a.createElement(K.b,{xs:{display:"flex"},margin:{left:-1,right:-1}},F.a.createElement(K.b,{padding:{x:1}},F.a.createElement(K.c,{id:"cancelButton",inline:!0,onClick:this.handleCancel,text:X.a._("Cancel"),size:"md"})),F.a.createElement(K.b,{padding:{x:1}},F.a.createElement(K.c,{color:"red",disabled:m,inline:!0,id:"submitButton",onClick:this.handleSubmit,text:s,size:"md"})))))},t.prototype.getSecretToggle=function e(){var t=this.props.showSecretBoardsLearnMore,n=this.state.privacy,a=F.a.createElement(K.b,null,X.a._("Secret"),t&&F.a.createElement(K.b,null,F.a.createElement(K.s,{target:"blank",href:q.a.GEN.templateConst.settings.HELP_BOARDS_SECRET_URL_SRC_CREATE},F.a.createElement(K.E,{size:"sm",smSize:2,mdSize:"xs",lgSize:"sm"},X.a._("Learn more")))));return F.a.createElement(K.b,{role:"listitem"},F.a.createElement(p,{label:a,labelId:"secret"},F.a.createElement(K.b,{padding:{y:2}},F.a.createElement(K.C,{switched:"secret"===n,id:"secret",name:"secret",onChange:this.handleChangePrivateToggle}))))},t.prototype.getBoardFormFields=function e(){var t=this.props,n=t.currentUserIsOwner,a=t.isNameAndSecretView;return n?a?F.a.createElement(M,null,this.getBoardTitleInput(),this.getSecretToggle()):F.a.createElement(M,null,this.getBoardTitleInput(),this.getDescriptionInput(),this.getCategoriesDropdown(),this.getCoverEdit(),this.getSecretToggle(),this.getCollaboratorsInviteList(),this.getCollaboratorsEmailCheckbox(),this.getCollaboratorsInviteToggle()):F.a.createElement(M,null,this.getCollaboratorsInviteList(),this.getCollaboratorsEmailCheckbox())},t.prototype.submitDisabled=function e(){var t=this.state,n=t.descriptionValidatorErrors,a=t.name,r=t.nameValidatorErrors;return!a||r.length>0||n.length>0},t.prototype.render=function e(){return F.a.createElement(K.b,{color:"white",margin:{left:"auto",right:"auto"},maxWidth:600,shape:"rounded"},F.a.createElement("form",{method:"post",onSubmit:this.handleSubmit},F.a.createElement(K.b,{margin:{right:5},padding:{x:2,y:3}},this.props.title),J,this.getBoardFormFields(),this.getFormFooter()))},Q(t,[{key:"fieldValues",get:function e(){return{name:this.state.name,description:this.state.description,category:this.state.category,privacy:this.state.privacy,collab_board_email:this.state.collab_board_email,collaborator_invites_enabled:this.state.collaboratorInvitesEnabled}}}]),t}(L.Component);$.defaultProps={isNameAndSecretView:!1,showCollaboratorsLearnMore:!0,showSecretBoardsLearnMore:!0};var ee=function e(t){return t.boards&&t.boards},te=t.a=Object(G.connect)(ee)($)},NYeZ:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){return l.a.createElement("img",{alt:e,className:"head",src:t})}function s(e){return{viewerId:e.viewer.id}}var c=n("OVW8"),l=n.n(c),u=n("DUIN"),p=n("GGB8"),d=n.n(p),m=3,h=[["fullWrapper"],["leftWrapper halfWrapper","rightWrapper halfWrapper isWholeHalf"],["leftWrapper halfWrapper","rightWrapper halfWrapper smallImage top","rightWrapper halfWrapper smallImage bottom"]],f=function e(t,n){var a=t.name,r=t.image_thumbnail_url;return l.a.createElement("div",{className:d()("Image","Module","boardMessageRep",n)},l.a.createElement("img",{alt:a,src:r}))},g=function e(t){function n(e){var t=e.full_name,n=e.is_default_image,a=e.image_large_url,r=e.image_medium_url,s=e.username,c=t?t[0].toUpperCase():"",u=a||r;return u&&!n?o?l.a.createElement("div",null,l.a.createElement("a",{href:"/"+s+"/"},i(t,u))):l.a.createElement("div",null,i(t,u)):l.a.createElement("div",{className:"head"},c)}var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments[2],o=arguments[3],s=["ConversationHead",t];return l.a.createElement("div",{className:s.join(" ")},l.a.createElement("div",{className:"contentContainer"},l.a.createElement("div",{className:"headWrapper"},l.a.createElement("div",{className:"imagesWrapper"},a.map(function(e,t){return l.a.createElement("div",{className:e,key:t},n(r[t]))})))))},v=function(e){function t(){return a(this,t),r(this,e.apply(this,arguments))}return o(t,e),t.prototype.getUsersToShow=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=this.props.viewerId;return void 0!==a&&(n=n.filter(function(e){return e.id!==a})),n.concat(t.map(function(e){return{full_name:e}})).slice(0,3)},t.prototype.render=function e(){var t=this.props,n=t.board,a=t.emails,r=t.shouldLink,o=t.size,i=t.users,s=this.getUsersToShow(a,i),c=s.length<=3?h[s.length-1]:[];return n?f(n,o):g(o,c,s,r)},t}(c.Component);v.defaultProps={
shouldLink:!1,size:"medium"},t.a=Object(u.connect)(s)(v)},NfjA:function(e,t,n){"use strict";function a(e){p.a.instance().handleConnect(e,!0,{})}function r(e){var t,n=e.network,r=(t={},t[m]=l.a._("Find friends from Facebook"),t[h]=l.a._("Find friends from Google+"),t[f]=l.a._("Find friends from Twitter"),t[g]=l.a._("Find friends from Yahoo"),t);return i.a.createElement("div",{className:"socialConnect",role:"listitem"},i.a.createElement(d.J,{onTouch:function e(){return a(n)}},i.a.createElement("div",{className:"socialConnectItem"},i.a.createElement("div",{className:"left"},i.a.createElement("div",{className:c()("icon","socialConnect-"+n)},v)),i.a.createElement("div",{className:"right"},i.a.createElement("h4",{className:"title"},r[n])))))}t.a=r;var o=n("OVW8"),i=n.n(o),s=n("GGB8"),c=n.n(s),l=n("W/Cr"),u=n("Svvu"),p=n("cD7N"),d=n("gEaE"),m=u.default.FACEBOOK,h=u.default.GPLUS,f=u.default.TWITTER,g=u.default.YAHOO,v=i.a.createElement("em",null)},PrM5:function(e,t,n){"use strict";function a(e){var t;return t={},t[r]={connected:!!e.facebook_url,url:e.facebook_url},t[i]={connected:e.connected_to_google||!1},t[s]={connected:!!e.gplus_url},t[l]={connected:e.connected_to_microsoft||!1},t[o]={connected:!!e.twitter_url,url:e.twitter_url},t[c]={connected:e.connected_to_yahoo||!1},t}t.e=a,n.d(t,"a",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"b",function(){return i}),n.d(t,"d",function(){return c});var r="facebook",o="twitter",i="google",s="gplus",c="yahoo",l="microsoft"},RvAN:function(e,t,n){"use strict";function a(e){return e===window?window.innerHeight:e.clientHeight}function r(){return void 0!==window.scrollY?window.scrollY:document.documentElement&&void 0!==document.documentElement.scrollTop?document.documentElement.scrollTop:0}function o(e){return e===window?r():e.scrollTop-e.getBoundingClientRect().top}function i(e){return e===window&&document.documentElement?document.documentElement.scrollHeight:e.scrollHeight}function s(e){return e===window?r():e.scrollTop}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function p(e){var t=Object(_.a)({name:e.resourceName,options:Object.assign({page_size:e.pageSize},e.resourceOptions)})(O);return m.a.createElement(t,e)}t.a=p;var d=n("OVW8"),m=n.n(d),h=n("GGB8"),f=n.n(h),g=n("W/Cr"),v=n("IaRT"),b=n.n(v),y=n("WBZ1"),E=n.n(y),C=n("gEaE"),_=n("Grh7"),w={UP:"up",DOWN:"down"},I=100,O=function(e){function t(){var n,r,o;c(this,t);for(var u=arguments.length,p=Array(u),d=0;d<u;d++)p[d]=arguments[d];return n=r=l(this,e.call.apply(e,[this].concat(p))),r.handleScroll=E()(function(){if(!r.props.isFetching){var e=r.props.scrollThreshold;i(r._container)-s(r._container)-a(r._container)<e&&r.fetchMore()}},I),r.addEventListeners=function(e){var t=r.props.useWindow;t&&(e=window),r.removeEventListeners(),e&&(t||e.addEventListener("wheel",r.preventScroll),e.addEventListener("scroll",r.handleScroll)),r._container=e},r.preventScroll=function(e){var t=e.deltaY<0?w.UP:w.DOWN,n=r._container.scrollHeight-r._container.scrollTop-r._container.clientHeight==0,a=0===r._container.scrollTop;(t===w.DOWN&&n||t===w.UP&&a)&&e.preventDefault()},o=n,l(r,o)}return u(t,e),t.prototype.componentWillReceiveProps=function e(t){var n=t.data.length;(0,t.onDataFetched)(n)},t.prototype.componentWillUnmount=function e(){this.removeEventListeners()},t.prototype.removeEventListeners=function e(){var t=this.props.useWindow;this._container&&(t||this._container.removeEventListener("wheel",this.preventScroll),this._container.removeEventListener("scroll",this.handleScroll))},t.prototype.fetchMore=function e(){this.props.isFetching||(this.props.isAtEnd?this._container.removeEventListener("scroll",this.handleScroll):this.props.fetchMoreData())},t.prototype.render=function e(){var t=this.props,n=t.className,a=t.renderEmptyState,r=t.renderItem;return this.props.isFetching||0!==this.props.data.length?m.a.createElement("div",{className:f()(n,"listContainer"),ref:this.addEventListeners},this.props.data?m.a.createElement("ul",{className:"scrollableList"},this.props.data.map(function(e,t){return r(e,t)})):null,this.props.isAtEnd?null:m.a.createElement("div",{className:"loadingItem"},m.a.createElement(C.B,{accessibilityLabel:g.a._("Loading items"),show:this.props.isFetching}))):a()},t}(d.Component);O.defaultProps={data:[],onDataFetched:function e(){},scrollThreshold:400,useWindow:!1},p.defaultProps={pageSize:10}},Vfgg:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i});var a=/[\- _,.<>:;+=*&@~\/\|!]*$/,r=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:80,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"â€¦",r=void 0;if(t.length<=n)return t;if(" "!==t[n-1]&&" "===t[n])r=t.substring(0,n);else{var o=t.lastIndexOf(" ",n);r=t.substring(0,o)}return(r=r.replace(/[\- _,.<>:;+=*&@~\/\|!]*$/,""))+a},o=/\s\s+/g,i=function e(t){return t.replace(/\s\s+/g," ")}},Wc91:function(e,t,n){"use strict";function a(e){var t=e.applyMarkup,n=e.applyLink,a=e.text,r=e.textMapping,s={};return r&&Object.keys(r).forEach(function(e){var a=r[e];s[e]=a.t.toString(),t&&(a.b&&(s[e]=o.a.createElement("strong",{key:e},s[e])),a.r&&(s[e]=o.a.createElement(u.E,{inline:!0,color:"red",key:e},s[e])),a.l&&n&&(s[e]=o.a.createElement(i.b,{key:e,to:a.l},s[e])))}),o.a.createElement("div",null,Object(l.a)(a,s))}t.a=a;var r=n("OVW8"),o=n.n(r),i=n("tmfO"),s=n("IaRT"),c=n.n(s),l=n("suNN"),u=n("gEaE");a.defaultProps={applyMarkup:!0,applyLink:!1,textMapping:{}}},XpQc:function(e,t,n){t=e.exports=n("D0DK")(),t.push([e.i,"._1mN_2 {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: justify;\n        -ms-flex-pack: justify;\n            justify-content: space-between;\n    padding: 10px;\n}\n\n._3b2sr {\n    background: #f1f1f1;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    padding: 10px;\n}\n\n._1zZTh {\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    color: #b5b5b5;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    padding-right: 10px;\n}\n\n.ClU2f {\n    font-size: 14px;\n}\n\n._1UOMX {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-flex: 1;\n        -ms-flex-positive: 1;\n            flex-grow: 1;\n    position: relative;\n}\n",""]),t.locals={conversationsGroupHeader:"_1mN_2",conversationGroupTokenizedWrapper:"_3b2sr",tokenizedWrapperTitle:"_1zZTh",newMessageTitle:"ClU2f",socialTypeaheadContainer:"_1UOMX"}},Y504:function(e,t,n){(function(t){var n,a=t.crypto||t.msCrypto;if(a&&a.getRandomValues){var r=new Uint8Array(16);n=function e(){return a.getRandomValues(r),r}}if(!n){var o=new Array(16);n=function(){for(var e=0,t;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}e.exports=n}).call(t,n("5jJ4"))},acfG:function(e,t,n){"use strict";function a(e){var t=e.backgroundColor,n=e.followersCount,a=e.followersCountDisplay,r=e.image,s=e.name,c=e.width,p=i.a.ngettext("{{ count }} {{ label }}","{{ count }} {{ label }}",n,"indicate a number of followers"),d=i.a.ngettext("follower","followers",n,"used in {{count}} {{followers}}");return o.a.createElement(u.b,null,o.a.createElement(u.t,{shape:"rounded"},r?o.a.createElement(u.b,{position:"relative"},o.a.createElement(u.r,{width:c,height:c,contentAspectRatio:r.width/r.height},o.a.createElement(u.p,{alt:s,color:t,naturalHeight:1,naturalWidth:1,src:r.url})),o.a.createElement(u.b,{height:c,width:c,dangerouslySetInlineStyle:{__style:{backgroundImage:"linear-gradient(to bottom,\n                    rgba(178, 178, 178, .1) 0%,\n                    rgba(134, 134, 134, .1) 30%,\n                    rgba(0, 0, 0, .5) 100%)"}},position:"absolute",top:!0})):o.a.createElement(u.b,{height:c,width:c,dangerouslySetInlineStyle:{__style:{backgroundColor:t}}}),o.a.createElement(u.b,{bottom:!0,left:!0,position:"absolute",padding:{x:1,y:1}},o.a.createElement(u.E,{bold:!0,color:"white",truncate:!0,size:"lg",smSize:"sm",mdSize:"md",lgSize:"lg"},s),n&&o.a.createElement(u.b,null,Object(l.b)(p,{count:o.a.createElement(u.E,{bold:!0,color:"white",inline:!0,key:"followersCount",size:"sm"},a),label:o.a.createElement(u.E,{color:"white",inline:!0,key:"followersLabel",size:"sm"},d)})))))}t.a=a;var r=n("OVW8"),o=n.n(r),i=n("W/Cr"),s=n("IaRT"),c=n.n(s),l=n("suNN"),u=n("gEaE")},aoZs:function(e,t,n){"use strict";function a(e){var t=e.body,n=void 0===t?"":t,a=e.img,r=e.onClick,o=e.selected,i=e.title,s=I()("ImageBlock","sendShareUserContact","selectable",{selected:o});return _.a.createElement("div",{className:s,onClick:r,role:"button"},_.a.createElement("div",{className:"left circle imageSize_sendShare"},a),_.a.createElement("div",{className:"right"},_.a.createElement("h4",{className:"imageBlockContentTitle"},i),_.a.createElement("div",{className:"imageBlockContentBody"},_.a.createElement("span",null,n))))}function r(e,t,n){if("user_share_suggestion"===e.type||"user"===e.type){var r=_.a.createElement("img",{alt:e.title,src:e.image_small_url});return _.a.createElement(a,{img:r,onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return n(e)}),selected:t,title:e.full_name})}if("email"===e.type){var o=e.address,i=e.valid,s=i?_.a.createElement("span",{className:"icon"},o[0].toUpperCase()):N,c=Object(S.c)(O.a._("Email {{ email }}"),{email:o}),l=i?O.a._("Click to send!"):O.a._("Keep typing!");return _.a.createElement(a,{body:l,img:s,onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return i?n(e):void 0}),selected:t,title:c})}}function o(e){return k.a.createElement(a,{img:x,onClick:e.onClick,selected:!1,title:e.message})}function i(e){H.a.instance().handleConnect(e,!0,{})}function s(e){return e===A?D.a._("Facebook"):e===V?D.a._("Twitter"):e===U?D.a._("Google"):e===L?D.a._("Yahoo"):D.a._("Other")}function c(e,t){if(e===A)return D.a._("Friends who are on Pinterest");if(e===U){if(t&&t.indexOf("@gmail")!==-1)return t}else if(e===L&&t&&t.indexOf("@yahoo")!==-1)return t;return null}function l(e){var t=W()("SocialNetworkConnectButton","listItem","sendShare",e.network),n=c(e.network,e.email);return R.a.createElement("a",{onClick:e.onClick,role:"button"},R.a.createElement("div",{className:t},G,R.a.createElement("div",{className:"networkInfo"},R.a.createElement("h4",{className:"title"},s(e.network)),n?R.a.createElement("div",{className:"subtitle"},n):null)))}function u(e){var t=Object(B.e)(e.user),n=F.filter(function(e){return t[e].connected===!1});return R.a.createElement("div",{className:"SocialConnectPanel fullWidth compact sendShare"},R.a.createElement("div",{className:"header"},R.a.createElement("div",{className:"backNav"},R.a.createElement("a",{onClick:e.onClose,role:"button"},z,R.a.createElement("span",{className:"label"},D.a._("Back")))),R.a.createElement("div",{className:"prompt"},D.a._("Upload contacts from..."))),R.a.createElement("ul",{className:"socialConnectOptions"},n.map(function(t){return R.a.createElement("li",{key:t},R.a.createElement(l,{email:e.user.email,network:t,onClick:function e(){return i(t)}}))})))}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function h(e,t,n){var a=e.id;return t===n.findIndex(function(e){return e.id===a})}function f(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function y(e,t){return se.a.create("BoardEmailInviteResource",{board_id:e,emails:t}).callCreate()}function E(e,t){return se.a.create("BoardInviteResource",{board_id:e,invited_user_ids:t}).callCreate()}var C=n("OVW8"),_=n.n(C),w=n("GGB8"),I=n.n(w),O=n("W/Cr"),S=n("5tOk"),N=_.a.createElement("span",{className:"icon typingEmail"},_.a.createElement("em",null)),T=n("OVW8"),k=n.n(T),x=k.a.createElement("em",{className:"icon socialConnectCta"}),P=n("OVW8"),R=n.n(P),j=n("GGB8"),W=n.n(j),B=n("PrM5"),D=n("W/Cr"),M=n("Svvu"),H=n("cD7N"),A=M.default.FACEBOOK,U=M.default.GOOGLE,V=M.default.TWITTER,L=M.default.YAHOO,F=[A,V,U,L],G=R.a.createElement("em",{className:"icon"}),z=R.a.createElement("span",{className:"icon"}),q=n("OVW8"),Y=n.n(q),X=n("W/Cr"),Z=n("XSNT"),K=n("skut"),Q=n("5tOk"),J=n("Grh7"),$=function(e){function t(){var n,a,r;p(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=a=d(this,e.call.apply(e,[this].concat(i))),a.state={selectedCollaborators:[],showSocialConnectPanel:!1,typeaheadSuggestions:[],value:""},a.handleTextFieldChange=function(e){a.setState({value:e})},a.handleCloseSocialConnectPanel=function(){a.setState({showSocialConnectPanel:!1})},a.handleCollaboratorClick=function(e){var t=e.id;a.isIdSelected[t]=!a.isIdSelected[t];var n=a.state.selectedCollaborators,r=n.concat([e]);a.props.onSelectedCollaboratorsChange(r.filter(function(e){var t=e.id;return a.isIdSelected[t]})),a.setState({selectedCollaborators:r})},a.handleShowSocialConnectPanel=function(){a.setState({showSocialConnectPanel:!0})},a.handleTypeaheadSuggestionsChange=function(e){a.setState({typeaheadSuggestions:e})},a.isIdSelected={},r=n,d(a,r)}return m(t,e),t.prototype.render=function e(){var t=this;if(this.state.showSocialConnectPanel)return Y.a.createElement(u,{onClose:this.handleCloseSocialConnectPanel,user:this.props.user});var n=this.state.value,a=""===n?this.props.shareSuggestions:this.state.selectedCollaborators.concat(this.state.typeaheadSuggestions).concat({type:"email",id:"email-"+n,address:n,valid:Object(Q.g)(n)}).concat(this.props.shareSuggestions).filter(h),i=a.map(function(e,n){return r(e,t.isIdSelected[e.id],t.handleCollaboratorClick)}).concat(Y.a.createElement(o,{message:""===n?X.a._("Choose from contacts"):X.a._("Find people you know"),onClick:this.handleShowSocialConnectPanel})).map(function(e,t){return Y.a.createElement("li",{key:t},e)});return Y.a.createElement(K.a,{onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",value:n},Y.a.createElement(Z.a,{onChange:this.handleTextFieldChange,placeholder:X.a._("Name or email"),value:n}),Y.a.createElement("div",{className:"ContactsList Typeahead sendShare fullWidth flexible compact open"},Y.a.createElement("ul",{className:"results"},i)))},t}(q.Component);$.defaultProps={shareSuggestions:[]};var ee=Object(J.a)({name:"ShareSuggestionsResource",key:"shareSuggestions"},{allowStale:!1})($);t.b=y,t.c=E;var te=n("OVW8"),ne=n.n(te),ae=n("DUIN"),re=n("IxI0"),oe=n("W/Cr"),ie=n("ZtCB"),se=n.n(ie),ce=n("g5tP"),le=n("gEaE"),ue="board_create",pe=function(e){function t(){var n,a,r;g(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=a=v(this,e.call.apply(e,[this].concat(i))),a.state={selectedCollaborators:[]},a.handleSubmit=function(e){a.props.dispatch(Object(ce.a)(e))},a.handleSelectedCollaboratorsChange=function(e){a.setState({selectedCollaborators:e})},a.emptyBoardData={collab_board_email:!0,collaborator_invites_enabled:!0,id:"",is_collaborative:!1,name:"",description:"",category:"other",owner:{username:a.props.currentUser.username},pin_count:0},r=n,v(a,r)}return b(t,e),t.prototype.componentDidUpdate=function e(t){if(t.creating&&!this.props.creating&&!this.props.error){var n=this.props.newBoard;n&&(this.inviteSelectedColaborators(n.id),this.props.onBoardCreate(n))}},t.prototype.inviteSelectedColaborators=function e(t){var n=this.state.selectedCollaborators.filter(function(e){return"email"===e.type});n.length>=1&&y(t,n.map(function(e){return e.type}));var a=this.state.selectedCollaborators.filter(function(e){return e.type.startsWith("user")});a.length>=1&&E(t,a.map(function(e){return e.id}))},t.prototype.render=function e(){var t=this.props,n=t.privacy,a=f(t,["privacy"]),r=ne.a.createElement("div",null,ne.a.createElement(ee,{onSelectedCollaboratorsChange:this.handleSelectedCollaboratorsChange,user:this.props.currentUser}));return ne.a.createElement(re.a,Object.assign({},a,{board:Object.assign({},this.emptyBoardData,{privacy:n}),boardCollaboratorsSection:r,currentUserIsOwner:!0,gaCategory:"board_create",isDeletable:!1,isEditable:!0,onSubmit:this.handleSubmit,submitText:oe.a._("Create"),title:ne.a.createElement(le.m,{size:"xs"},oe.a._("Create board"))}))},t}(te.Component),de=function e(t){return t.boards&&t.boards.creating},me=t.a=Object(ae.connect)(de)(pe)},cD7N:function(e,t,n){"use strict";function a(){}var r=n("YlIK"),o=n("Cjb7"),i=n("ZtCB"),s=n.n(i),c=n("Svvu"),l=n("DLm7"),u=n("EAiy"),p=1e3,d=110;Object.assign(a.prototype,{handleConnect:function e(t,n,a){if(n&&!u.a.isLimitedLogin()){var r={success:function(e){var r={network:t,data:e};this._internalConnectNetwork(n,r,a)}.bind(this),error:function e(t){a.error&&a.error(t)},complete:function e(){a.complete&&a.complete()}};this._externalConnectNetwork(t,n,r)}else{var o={network:t};this._internalConnectNetwork(n,o,a)}},updateConnectStatus:function e(){s.a.create("UserResource",{user_id:u.a.get("id"),username:u.a.get("username"),field_set_key:"social_connect"}).callGet().then(function(e){var t=e.resource_response.data;u.a.set(t),o.a.instance.publish("currentUser","socialNetworkUpdated",t)})},_externalConnectNetwork:function e(t,n,a){if(!n)return void(a.success&&a.success({}));c.default.instance().connect(t,a)},_internalConnectNetwork:function e(t,n,a){var r=this,o=s.a.create("UserSocialNetworkResource",n);(t?o.callCreate():o.callDelete()).then(function(e){r.updateConnectStatus(),a.success&&a.success(e)},function(e){a.error&&e instanceof Object&&a.error(e)}).fin(function(){a.complete&&a.complete()})},_getResourceNameForNetworkFriends:function e(t){var n=null;switch(t){case c.default.FACEBOOK:n="UserFacebookFriendsResource";break;case c.default.TWITTER:n="UserTwitterFriendsResource";break;case c.default.GOOGLE:n="UserGmailFriendsResource";break;case c.default.YAHOO:n="UserYahooFriendsResource";break;case c.default.MICROSOFT:n="UserMicrosoftFriendsResource";break;default:return}return n},_handleFriendsImported:function e(t,n,a){var r={resource:n,network:t,error:a};o.a.instance.publish("site","friendImportCompleted",r)},pollForFriends:function e(t,n){var a=this;n=n||{};var r=n.resourceOptions||{},o=this._getResourceNameForNetworkFriends(t);if(o){var i=s.a.create(o,r);i.callGet({showError:!1}).then(function(){var e=n.success;e&&e(i),a._handleFriendsImported(t,i,null)},function(e){if(110===e.api_error_code)l.a.setTimeout(function(){a.pollForFriends(t,n)},1e3);else{var r=n.error;r&&r(),a._handleFriendsImported(t,i,e)}})}}});var m=null;a.instance=function(){return m||(m=new a),m},t.a=r.a.expose("SocialNetworkSettingsManager",a)},eXpm:function(e,t,n){var a=n("XpQc");"string"==typeof a&&(a=[[e.i,a,""]]);var r=n("IynO")(a,{});a.locals&&(e.exports=a.locals)},fvzG:function(e,t,n){"use strict";function a(e){return{type:"CONVERSATION_SHOW",payload:{id:e}}}function r(e){return{type:"CONVERSATION_HIDE",payload:{id:e}}}function o(e){return{type:"CONVERSATION_OPEN",payload:{id:e}}}function i(e){return{type:"CONVERSATION_CLOSE",payload:{id:e}}}function s(e){return{type:"CONVERSATION_CREATE",payload:e}}function c(e){return{type:"CONVERSATION_DELETE",payload:{id:e}}}function l(e,t){return{type:"MESSAGE_SEND_PENDING",payload:{id:e,message:t}}}function u(e,t){return{type:"MESSAGE_SEND_PENDING_CLEAR",payload:{id:e,messageId:t}}}t.d=a,t.b=r,t.c=o,t.a=i,t.f=l,t.e=u},gEJd:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var p=n("mO/z"),d=n.n(p),m="undefined"!=typeof window&&window.performance?function(){return Math.floor(1e6*window.performance.now())}:function(){return 1e6*Date.now()},h=function e(t){var n=this;a(this,e),this.start=function(){return n.startTime=m(),n.startTime},this.end=function(){return n.endTime=m(),n.duration=n.startTime?n.endTime-n.startTime:null,n.duration},this.uuid=d()(),t&&Object.assign(this,t)},f=h,g=n("OVW8"),v=n.n(g),b=n("RklN"),y=n.n(b),E=function(e){function t(){var n,a,i;r(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=a=o(this,e.call.apply(e,[this].concat(c))),a.observer=null,a.handleVisibilityChanged=function(e,t){a.props.onVisibilityChange(e,t)},i=n,o(a,i)}return i(t,e),t.prototype.componentDidMount=function e(){var t=y.a.findDOMNode(this);t instanceof HTMLElement&&(this.node=t),this.node&&(this.observer=new window.IntersectionObserver(this.handleVisibilityChanged,this.props.options),this.observer.observe(this.node))},t.prototype.componentWillUpdate=function e(t){},t.prototype.componentWillUnmount=function e(){null!==this.observer&&(this.observer.unobserve(this.node),delete this.observer)},t.prototype.render=function e(){return g.Children.only(this.props.children)},t}(g.Component),C=E,_=n("OVW8"),w=n.n(_),I=n("IaRT"),O=n.n(I),S=function(e){function t(n,a){s(this,t);var r=c(this,e.call(this,n,a));return r.getChildContext=function(){var e=r.props,t=e.view,n=e.viewParameter,a=e.component,o=e.element,i=e.objectId;return{view:t||r.context.view,viewParameter:n||r.context.viewParameter,component:a||r.context.component,element:o,objectId:i||r.context.objectId,getParentUuid:function e(){return r.getUuid()}}},r.componentWillUnmount=function(){r.unregisterComponent()},r.getLoggerContext=function(){var e=r.getChildContext();return{view:e.view,viewParameter:e.viewParameter,component:e.component,element:e.element,objectId:e.objectId}},r.getParentId=function(){return r.context.getParentUuid?r.context.getParentUuid():void 0},r.getUuid=function(){if(r.state.timedPair)return r.state.timedPair.uuid},r.getTimedPair=function(){return r.state.timedPair},r.setTimedPair=function(e){r.setState({timedPair:e})},r.isRegistered=!1,r.registerComponent=function(){r.props.timeSpentManager.registerComponent(r),r.isRegistered=!0},r.unregisterComponent=function(){r.isRegistered&&(r.props.timeSpentManager.unregisterComponent(r),r.isRegistered=!1)},r.handleVisibilityChange=function(e){var t=e[0].intersectionRatio,n=e[0].intersectionRect,a=n.bottom,o=n.left,i=n.right,s=n.top;t>0?r.registerComponent():0===t&&(0===a&&0===o&&0===i&&0===s?r.unregisterComponent():r.registerComponent())},r.state={timedPair:new f(r.getLoggerContext())},r}return l(t,e),t.prototype.render=function e(){return w.a.createElement(C,{options:{threshold:0},onVisibilityChange:this.handleVisibilityChange},this.props.children)},t}(_.Component);S.contextTypes={view:O.a.number,viewParameter:O.a.number,component:O.a.number,element:O.a.number,objectId:O.a.string,getParentUuid:O.a.func},S.childContextTypes={view:O.a.number,viewParameter:O.a.number,component:O.a.number,element:O.a.number,objectId:O.a.string,getParentUuid:O.a.func};var N=S,T=n("RklN"),k=n.n(T),x={ACTIVE:"ACTIVE",PAUSED:"PAUSED"},P=function e(){return window&&window.performance?"(Time: "+(window.performance.now()/1e3).toFixed(3)+"s)":""},R=function e(t){var n=t.flushEvents,a=t.shouldShowLogStatements,r=void 0!==a&&a,o=t.track,i=new Map,s=r?console:{error:function e(){},log:function e(){},group:function e(){},groupEnd:function e(){}};return console.group||(s.group=function(){var e;return(e=console).log.apply(e,arguments)},s.groupEnd=function(){}),new(function(){function e(){var t=this;u(this,e),this.appTimedPair=null,this.addEventListeners=function(){var e=void 0,n=void 0;void 0!==document.hidden?(e="hidden",n="visibilitychange"):void 0!==document.msHidden?(e="msHidden",n="msvisibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",n="webkitvisibilitychange");var a=function n(){document[e]?t.unregisterApp(!1):document.hasFocus()&&t.registerApp()};n&&document.addEventListener(n,a,!1),window.addEventListener("focus",t.registerApp),window.addEventListener("blur",function(){return t.unregisterApp(!1)}),window.addEventListener("beforeunload",function(){return t.unregisterApp(!0)})},this.registerApp=function(){s.group("App Foreground",P()),null==t.appTimedPair?(t.appTimedPair=new f,t.appTimedPair.start(),t._unpauseAllComponents(),null!==t.appTimedPair&&void 0!==t.appTimedPair&&o({event_type:4700,pair_id:t.appTimedPair.uuid})):s.error("TimedPair already exists for app."),s.groupEnd()},this.unregisterApp=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];s.group("App Background",P());var a=t.appTimedPair;if(null!==a&&void 0!==a){t._pauseAllComponents();o({event_type:4701,duration_ns:a.end(),pair_id:a.uuid}),t.appTimedPair=null}else s.error("No TimedPair found for app.");n(e),s.groupEnd()},this._activateComponent=function(e){s.group("Activating component",P()),r&&s.log(k.a.findDOMNode(e));var n=e.getTimedPair();if(n){n.start();var a=e.getLoggerContext(),i=a.component,c=a.element,l=a.objectId;o({event_type:4702,view_type:a.view,view_parameter:a.viewParameter,component:i,element:c,object_id_str:l,view_data:e.props.viewData,pair_id:n.uuid,aux_data:Object.assign({time_spent_foreground_pairid:t.appTimedPair&&t.appTimedPair.uuid,time_spent_parent_pairid:e.getParentId()},e.props.auxData)})}s.groupEnd()},this._deactivateComponent=function(e){s.group("Deactivating component",P()),r&&s.log(k.a.findDOMNode(e));var n=e.getTimedPair();if(n){var a=n.view,i=n.viewParameter,c=n.component,l=n.element,u=n.objectId,p=n.end();o({event_type:4703,view_type:a,view_parameter:i,component:c,element:l,object_id_str:u,view_data:e.props.viewData,duration_ns:p,pair_id:n.uuid,aux_data:Object.assign({time_spent_foreground_pairid:t.appTimedPair&&t.appTimedPair.uuid,time_spent_parent_pairid:e.getParentId()},e.props.auxData)})}s.groupEnd()},this._pauseAllComponents=function(){s.group("Pause all components"),i.forEach(function(e,n,a){e===x.ACTIVE&&t._deactivateComponent(n),a.set(n,x.PAUSED)}),s.groupEnd()},this._unpauseAllComponents=function(){s.group("Unpause all components"),i.forEach(function(e,t){t.setTimedPair(new f(t.getLoggerContext()))}),i.forEach(function(e,n){i.set(n,x.ACTIVE),t._activateComponent(n)}),s.groupEnd()}}return e.prototype.registerComponent=function e(t){null===this.appTimedPair?i.set(t,x.PAUSED):(i.set(t,x.ACTIVE),this._activateComponent(t))},e.prototype.unregisterComponent=function e(t){i.get(t)===x.ACTIVE&&(this._deactivateComponent(t),t.setTimedPair(new f(t.getLoggerContext()))),i.delete(t)},e.prototype.size=function e(){return i.size},e}())},j=R;n.d(t,"b",function(){return j}),n.d(t,!1,function(){return f}),n.d(t,"a",function(){return N})},"j1/O":function(e,t,n){"use strict";var a=n("hlP+"),r=n.n(a),o=n("g1tx"),i=n("ZtCB"),s=n.n(i),c=n("EAiy"),l=5,u=function e(t){t=t||{},this.tags=t.tags,this.enable_recent_queries=!!t.enable_recent_queries,this.minimum_term_character_length=t.minimum_term_character_length||0,this.bypass_lru_cache=t.bypass_lru_cache;var n={tags:t.tags,pin:t.pin_id},a=t.num_places;a?n.num_places=a:n.count="count"in t?t.count:5,t.should_geocode&&(n.should_geocode=!0),t.exclude_non_followers&&(n.exclude_non_followers=!0),t.field_set_key&&(n.field_set_key=t.field_set_key),t.pin_scope&&(n.pin_scope=t.pin_scope);var r="TypeaheadResource";t.resource_name&&(r=t.resource_name),this.searchResource=s.a.create(r,n),this.itemsCache=new o.a};Object.assign(u.prototype,r.a),Object.assign(u.prototype,{search:function e(t,n){var a=void 0;if(!t&&"pinners_and_contacts"===this.tags)return this.abortSearch(),this.publishData(t,[],{},n);if(!t&&c.a.isLimitedLogin())return this.abortSearch(),this.publishData(t,[],{},n);if(!t&&this.enable_recent_queries&&c.a&&c.a.isAuthenticated())a="recent_search";else{var r=this.bypass_lru_cache?{}:this.itemsCache.get(t);if(r){var o=r.items;if(o&&o.length){this.abortSearch();var i=r.hint;return void this.publishData(t,o,i,n)}}}t.length>=this.minimum_term_character_length?this.fetch(t,a,n):this.publishData(t,[],{},n)},getResource:function e(){return this.searchResource},abortSearch:function e(){this.trigger("typeaheadSearchAbort"),this.getResource().abort()},publishData:function e(t,n,a,r){var o={term:t,items:n,hint:a};this.trigger("data",o),r&&r(o)},setAutocompleteScope:function e(t){this.getResource().set("autocompleteScope",t)},fetch:function e(t,n,a){var r=this,o=this.getResource();if(o.isCalling()){if(t===o.get("term"))return;this.abortSearch()}""!==this.tags&&(this.trigger("typeaheadSearchStart",t),o.set("term",t),o.set("tags",n||this.tags),o.resetBookmark(),o.callGet({showError:!1}).then(function(e){var n=e.resource_response.data,o=n.items,i=n.hint||{},s={hint:i,items:o};r.cacheData(t,s),r.publishData(t,o,i,a)},function(e){r.trigger("fetchError",e)}),this.warm=!0)},removeCacheForTerm:function e(t){this.itemsCache.remove(t)},cacheData:function e(t,n){this.itemsCache.set(t,n)},prefetch:function e(){if(!this.warm){s.a.create("TypeaheadPrepareResource").callGet({showError:!1}),this.warm=!0}}}),t.a=u},kopg:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return e.height/e.width}function s(e,t,n,a){var r=i(n),o=Math.max(b.HALF,a)*e,s=o/t,c=a*e,l={height:o,left:0,maxWidth:Number.MAX_SAFE_INTEGER,position:"relative",top:0,width:t};if(r<s){var u=o/n.height,p=n.width*u,d=(p-t)/-2;l.left=d,l.width=p}else{var m=t/n.width,h=n.height*m,f=(h-c)/-2;l.height=h,l.top=f}return l}function c(e,t){var n={};if(e<3)if(Math.random()<.5)n[0]=!0;else{if(1===e)return n;n[1]=!0}else{if(t.length<3)n[1]=!0;else{i(t[1])>i(t[2])?n[1]=!0:n[2]=!0}n[1]&&e>y&&Math.random()<.5&&(n[3]=!0)}return n}function l(e,t,n,a,r){for(var o=(t-v*(e-1))/e,i=n-v*(E-1),s=c(e,r),l=Object.keys(s).length,u=[],p=0;p<a;p+=1)p>=a-l?u.push(b.ASYM_BOTTOM):s[p%e]?u.push(b.ASYM_TOP):u.push(b.HALF);return{colHeight:i,colWidth:o,gridHeightRatioArray:u}}function u(e){var t=e.colHeight,n=e.colWidth,a=e.heightRatio,r=e.image,o=e.boardName;a=a||0;var i=Math.max(b.HALF,a)*t,c={height:i+v,margin:v/2},l=s(t,n,r,a);return m.a.createElement("div",{style:c},m.a.createElement("div",{className:"bg-super-light-gray overflow-hidden",style:{height:i}},r.url?m.a.createElement("div",{className:"relative"},_,m.a.createElement("img",{alt:o,src:r.url,style:l})):null))}function p(e){var t=e.height,n=e.imgUrl,a=e.imgPos,r=e.width,o={height:t,padding:v/2,width:r},i=t/r,s="center center";if(a.y||a.x){var c=1;c=a.height/a.width>i?r/a.width:t/a.height;s="-"+a.x*c+"px -"+a.y*c+"px"}var l={backgroundImage:"url("+n+")",backgroundPosition:s,backgroundRepeat:"no-repeat",backgroundSize:"cover",minHeight:"100%"};return m.a.createElement("div",{style:o},m.a.createElement("div",{className:"relative",style:l},w))}var d=n("OVW8"),m=n.n(d),h=n("IaRT"),f=n.n(h),g=n("gEaE"),v=2,b={ASYM_BOTTOM:.25,ASYM_TOP:.75,HALF:.5},y=3,E=2,C={dominant_color:"#FFFFFF",height:0,url:"",width:0},_=m.a.createElement("div",{className:"imageWash absolute"}),w=m.a.createElement("div",{className:"imageWash absolute"}),I=function(e){function t(){return a(this,t),r(this,e.apply(this,arguments))}return o(t,e),t.prototype.renderItem=function e(t,n,a){var r=this.props.boardName,o=a.gridHeightRatioArray[n-1];return m.a.createElement(u,{boardName:r,colHeight:a.colHeight,colWidth:a.colWidth,heightRatio:o,image:t})},t.prototype.render=function e(){for(var t=this,n=this.props,a=n.boardThumbs,r=n.coverImagePos,o=n.coverImageUrl,i=n.height,s=n.coverImageWidth,c=void 0===s?i:s,u=n.numCols,d=n.width,h=a||[],f=o?u-2:u,v=o?d-c:d,b=E*f,_=h.slice(0,b),w=h.length;w<b;w+=1)_.push(Object.assign({},C));this.layoutHelper=this.layoutHelper||l(f,v,i,b,h.slice(0,y));var I={height:i},O={width:v},S=function e(n){var a=n.data,r=n.itemIdx;return t.renderItem(a,r,t.layoutHelper)};return m.a.createElement("div",{className:"overflow-hidden",style:I},m.a.createElement(g.t,{height:i,shape:"rounded",width:d},m.a.createElement("div",{className:"flex",style:{margin:"-1px"}},o&&m.a.createElement(p,{height:i,imgPos:r,imgUrl:o,width:c}),m.a.createElement("div",{style:O},m.a.createElement(g.u,{comp:S,flexible:!0,items:_,loadItems:function e(){},columnWidth:this.layoutHelper.colWidth,gutterWidth:0,minCols:1,ref:function e(n){t.gridRef=n}})))))},t}(d.Component);I.defaultProps={boardName:"",boardThumbs:[],coverImagePos:{height:0,width:0,x:0,y:0},coverImageUrl:""},t.a=I},"mO/z":function(e,t,n){function a(e,t,n){var a=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var i=e.random||(e.rng||r)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var s=0;s<16;++s)t[a+s]=i[s];return t||o(i)}var r=n("Y504"),o=n("yUpo");e.exports=a},nX0T:function(e,t,n){"use strict";var a=n("OVW8"),r=n.n(a),o=n("s149"),i=n("gEJd"),s=function e(t){return r.a.createElement(i.a,Object.assign({},t,{timeSpentManager:o.a}))};t.a=s},s149:function(e,t,n){"use strict";var a=n("hVsM"),r=n("SnoN"),o=n("FJZF"),i=n("gEJd"),s=o.a.getQueryStringParams()&&o.a.getQueryStringParams().debug_timespent,c=function e(t){var n=r.a.getInstance(),o=a.a.fromPlainObject(t);n.addEvent(o)},l=function e(t){r.a.getInstance().flushEvents(t)};t.a=Object(i.b)({flushEvents:l,shouldShowLogStatements:s,track:c})},skut:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("OVW8"),s=n.n(i),c=n("IaRT"),l=n.n(c),u=n("j1/O"),p=function(e){function t(n,o){a(this,t);var i=r(this,e.call(this,n,o));return i.searchCache=Object.create(null),i.search=function(e){e in i.searchCache?i.props.onTypeaheadSuggestionsChange(i.searchCache[e],e):i.provider.search(e,function(t){var n=t.items;i.searchCache[e]=n,i.props.onTypeaheadSuggestionsChange(n,e)})},i.props.shouldCacheEmptyQuery&&(i.searchCache[""]=null),i}return o(t,e),t.prototype.componentDidMount=function e(){var t=this.props.resourceOptions||{};this.provider=new u.a(Object.assign({resource_name:this.props.resourceName},t));var n=this.props.value;void 0!==n&&null!==n&&this.props.allowSearchOnMount&&this.search(this.props.value)},t.prototype.componentWillReceiveProps=function e(t){var n=t.value;void 0!==n&&null!==n&&n!==this.props.value&&this.search(n)},t.prototype.render=function e(){return s.a.createElement("div",{className:this.props.className},this.props.children)},t}(i.Component);p.defaultProps={resourceName:"TypeaheadResource",shouldCacheEmptyQuery:!1},t.a=p},tPsC:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("OVW8"),s=n.n(i),c=n("GGB8"),l=n.n(c),u=n("IaRT"),p=n.n(u),d=n("AsH/"),m=4,h="136x136",f=60,g=40,v=function(e){function t(){return a(this,t),r(this,e.apply(this,arguments))}return o(t,e),t.prototype.getRowElements=function e(){var t=this.props,n=t.hasBrioCorners,a=t.imageSize,r=t.isFullWidth,o=t.itemHeight,i=t.previewItemCount,c=t.previewItems,u=t.showEmptyCards,p=new Set,m=Math.min(i-4,99),h=u?4:Math.min(c.length,4);return Array.from(new Array(h)).map(function(e,t){var i=c[t]||{},u=i.image_signature,h=i.images,f=i.type;if(f&&f!==d.c.PIN)return null;if(u&&p.has(u))return null;p.add(u);var g=h&&h[a||"136x136"],v={backgroundPosition:"center top",backgroundSize:"cover",borderRadius:!r&&"4px",display:"inline-block",height:"100%",width:r?"100%":40,backgroundImage:g?"url("+(g||{}).url+")":""},b=s.a.createElement("div",{className:"previewRowNumber"},"+"+m);return s.a.createElement("span",{className:l()("borderRadiusFix","previewRowItem",{previewRowFullWidthItem:r},{hasBrioCorners:n}),key:t,style:{height:o||60}},s.a.createElement("span",{style:v},3===t&&m>0&&b))}).filter(function(e){return e})},t.prototype.render=function e(){return s.a.createElement("div",null,this.getRowElements())},t}(i.Component);v.defaultProps={hasBrioCorners:!1,previewItems:[]},t.a=v},tZWC:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=n("OVW8"),u=n.n(l),p=n("GGB8"),d=n.n(p),m=n("9bGG"),h=n("W/Cr"),f=function(e){function t(){return a(this,t),r(this,e.apply(this,arguments))}return o(t,e),t.prototype.componentWillReceiveProps=function e(t){!this.props.isHovering&&t.isHovering?this.props.onHoverStart():this.props.isHovering&&!t.isHovering&&this.props.onHoverEnd()},t.prototype.render=function e(){var t=this.props,n=t.is_pinner?h.a._("On Pinterest"):t.email?t.email:"facebook_non_pinner"===t.type?h.a._("Facebook"):"gplus_non_pinner"===t.type?h.a._("Google"):h.a._("Enter an email address");return u.a.createElement("a",Object.assign({},this.props.hoverHandlers,{onClick:this.props.onClick,role:"button"}),t.send_pin_image?u.a.createElement("span",{className:"typeaheadImg"},u.a.createElement("img",{alt:"",src:t.send_pin_image})):null,u.a.createElement("p",{className:d()("typeaheadName",{hasImage:t.send_pin_image})},t.label),u.a.createElement("div",{className:"titleWrapper"},u.a.createElement("i",{className:d()("titleIcon",{isPinner:t.is_pinner},{isFacebook:"facebook_non_pinner"===t.type},{isGplus:"gplus_non_pinner"===t.type})}),u.a.createElement("p",{className:"title"},n)))},t}(l.Component),g=Object(m.a)(f),v=n("OVW8"),b=n.n(v),y=n("DUIN"),E=n("GGB8"),C=n.n(E),_=n("PrM5"),w=n("W/Cr"),I=n("XSNT"),O=n("z/23"),S=n("NfjA"),N=n("Svvu"),T=n("skut"),k=n("Kqaz"),x=n("Cjb7"),P=n("5tOk"),R=n("aoZs"),j=[N.default.FACEBOOK,N.default.TWITTER,N.default.GPLUS,N.default.YAHOO],W=b.a.createElement("div",{className:"footer white"}),B=function(e){function t(){var n,a,r;i(this,t);for(var o=arguments.length,c=Array(o),l=0;l<o;l++)c[l]=arguments[l];return n=a=s(this,e.call.apply(e,[this].concat(c))),a.state={networks:Object(_.e)(a.props.viewer),open:!1,typeaheadSuggestions:[]},a.onUserInviteClick=function(e){var t=e.id,n=a.props,r=n.boardId,o=n.onInviteItemClick;r?o(Object(R.c)(r,[t])):o(!0,e)},a.handleBodyClick=function(e){a._results.contains(e.target)||a.setState({open:!1})},a.handleTypeaheadSuggestionsChange=function(e){var t=a.props.viewer;a.setState({typeaheadSuggestions:(e||[]).filter(function(e){return e.id!==t.id})})},a.handleOnEmailInviteClick=function(){var e=a.props,t=e.boardId,n=e.onInviteItemClick,r=e.value;t?n(Object(R.b)(t,[r])):n(!1,r)},a.subscriber=x.b.subscribe("currentUser","socialNetworkUpdated",function(e,t,n){a.setState({networks:Object(_.e)(n)})}),a.logTypeaheadInput=function(e){(0,a.props.contextLog)(4113,{component:13029,element:1043,entered_query:e})},a.logSearchContactItemClick=function(e){var t=a.props;(0,t.contextLog)(101,{component:13029,element:1044,entered_query:t.value,result_index:e})},a.renderResultItems=function(){var e=a.props.changeOnTextHover,t=C()("Typeahead","userSelect",{open:a.state.open}),n=a.state.typeaheadSuggestions.map(function(t,n){return b.a.createElement(g,Object.assign({currentUser:a.props.currentUser,key:n,onClick:function e(){a.onUserInviteClick(t),a.logSearchContactItemClick(n)},onHoverEnd:function t(){return e?a.restoreTextFieldValue():null},onHoverStart:function n(){return e?a.forceTextFieldValue(t.label):null}},t))}).concat(a.getStaticItems()).map(function(e,t){return b.a.createElement("li",{key:t},e)});return b.a.createElement("div",{className:t,ref:function e(t){a._results=t},style:{zIndex:1e3}},b.a.createElement("ul",null,n),a.props.inBoardCollaboratorInviter?W:null)},r=n,s(a,r)}return c(t,e),t.prototype.componentDidMount=function e(){var t=this;["mousedown","touchstart"].forEach(function(e){document.addEventListener(e,t.handleBodyClick)})},t.prototype.componentWillReceiveProps=function e(t){var n=t.value;this.setState({open:n.length>0})},t.prototype.componentWillUnmount=function e(){var t=this;["mousedown","touchstart"].forEach(function(e){document.removeEventListener(e,t.handleBodyClick)}),this.subscriber.unsubscribe()},t.prototype.getStaticItems=function e(){return[].concat(this.getEmailItems(),this.getSocialItems(this.state.networks))},t.prototype.getEmailItems=function e(){var t=this.props.value;return[b.a.createElement(O.a,{email:t,isValid:Object(P.g)(t),key:"send-to-email-component",onClick:this.handleOnEmailInviteClick,showSendEmailText:!1})]},t.prototype.getSocialItems=function e(t){return Object.keys(t).filter(function(e){return j.includes(e)}).filter(function(e){return t[e].connected===!1}).map(function(e,t){return b.a.createElement(S.a,{key:"socialConnect-"+e,network:e})})},t.prototype.forceTextFieldValue=function e(t){this.previousValue=this.props.value,this.props.onChange(t)},t.prototype.restoreTextFieldValue=function e(){this.props.onChange(this.previousValue),delete this.previousValue},t.prototype.render=function e(){var t=this,n=this.props,a=n.boardId,r=n.className,o=n.inBoardCollaboratorInviter,i=n.onChange,s=n.onKeyDown,c=n.showInputPlaceholder,l=n.value,u=C()("Input","field",{reactCollaboratorInviterTypeaheadCustom:o},{collaboratorInviterTypeahead:!o}),p=a?{board:a}:null;return b.a.createElement(T.a,{className:C()(r,"reactSocialTypeahead"),onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",resourceOptions:p,value:l},b.a.createElement("div",null,b.a.createElement("div",{className:"TypeaheadField userSelect inputContainer"},b.a.createElement(I.a,{className:u,id:"collaboratorInviterTypeahead",onChange:function e(n){i(n),t.logTypeaheadInput(n)},onKeyDown:s,placeholder:c?w.a._("Name or email","search"):null,value:l})),this.renderResultItems()))},t}(v.Component);B.defaultProps={changeOnTextHover:!1,onKeyDown:function e(){},showInputPlaceholder:!0};var D=function e(t){return{viewer:t.viewer}},M=t.a=Object(k.a)(Object(y.connect)(D)(B))},wPZC:function(e,t,n){"use strict";function a(){return s[Math.floor(Math.random()*s.length)]}function r(e){var t=e.i18n,n=e.user,r=e.search,o=e.storyType;if(o===h.c.USER){var i=n.full_name,s=n.image_large_url;return l.a.createElement("div",{className:"attributionUserBorder",style:{height:h.b,width:h.b}},l.a.createElement(m.a,{name:i,src:s}))}return o===h.c.SEARCH?l.a.createElement("div",{className:"attributionSearchBorder"},l.a.createElement(m.b,{shape:"pill",color:a()},l.a.createElement(m.b,{padding:{x:2},xs:{display:"flex"},alignItems:"center"},l.a.createElement(m.b,{margin:{right:1}},l.a.createElement(m.n,{accessibilityLabel:t._("search"),icon:"search",label:"search",color:"white"})),l.a.createElement(m.b,{maxWidth:150,padding:{y:2}},l.a.createElement(m.E,{truncate:!0,color:"white",smSize:"xs",mdSize:"sm",lgSize:"md"},r))))):null}function o(e,t,n,a){return l.a.createElement("div",{key:t,className:"miniPinGridItem",style:{backgroundImage:"url("+e.url+")",height:n,width:a}})}function i(e){var t=e.height,n=e.i18n,a=e.pins,i=e.pinWidth,s=e.search,c=e.storyType,u=e.user;return l.a.createElement(m.b,{position:"relative"},l.a.createElement(m.t,{height:t,shape:"rounded",wash:!0},l.a.createElement(m.b,null,a.map(function(e,n){return o(e,n,t,i)}))),l.a.createElement("span",{className:"attributionWrapper"},l.a.createElement(r,{i18n:n,search:s,storyType:c,user:u})))}var s=["orange","green","purple","watermelon","pine","navy","eggplant","olive","maroon"],c=n("OVW8"),l=n.n(c),u=n("IaRT"),p=n.n(u),d=n("AYde"),m=n("gEaE"),h=n("AsH/"),f=t.a=Object(d.b)(i)},yUpo:function(e,t){function n(e,t){var n=t||0,r=a;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]}for(var a=[],r=0;r<256;++r)a[r]=(r+256).toString(16).substr(1);e.exports=n},"z/23":function(e,t,n){"use strict";function a(e){var t=e.email,n=e.isValid,a=e.onClick,r=e.showSendEmailText,i=n?o.a.createElement("div",{className:"icon"},t[0].toUpperCase()):o.a.createElement("div",{className:s()("icon","typingEmail")},u),p=n?c.a._("Click to send!"):c.a._("Keep typing!"),d=r?Object(l.h)(c.a._("Email {{ email }}"),{email:t}):Object(l.h)(c.a._("Invite {{ email }}"),{email:t});return o.a.createElement("div",{className:s()("sendToEmail",{unclickable:!n})},o.a.createElement("a",{className:"selectableEmailItem",onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){n&&a()}),role:"button"},o.a.createElement("div",{className:"left"},i),o.a.createElement("div",{className:"right"},o.a.createElement("h4",{className:"title"},d),o.a.createElement("p",{className:"subtitle"},p))))}t.a=a;var r=n("OVW8"),o=n.n(r),i=n("GGB8"),s=n.n(i),c=n("W/Cr"),l=n("5tOk"),u=o.a.createElement("em",null)}});